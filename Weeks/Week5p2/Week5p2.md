---
title       : "Loops, part 2"
subtitle    : Week 5.2
author      : Daniel Anderson
job         : CourseR
framework   : io2012        # {io2012, html5slides, shower, dzslides, ...}
highlighter : highlight.js  # {highlight.js, prettify, highlight}
hitheme     : zenburn      # 
widgets     : [mathjax]            # {mathjax, quiz, bootstrap}
mode        : selfcontained # {standalone, draft}
knit        : slidify::knit2slides
---

<style>
em {
  font-style: italic
}
</style>

<style>
strong {
  font-weight: bold;
}
</style>

## Today's Agenda 
* Apply family of loops
    + `apply()`
      - Also `rowSums()` and `colSums()`
    + `lapply()`
    + `sapply()`
    + `mapply()`
    + `tapply()`
      - Also `rowsum()`
* Similar functions
    + `by()`
    + `aggregate()`
    + `sweep()`

----
## Some basic background
* The apply family of loops are exceptionally useful, and can often speed up
  your code.
* Advantages over for loops include
	+ No need for initialization of objects
	+ Automatic indexing of an object (if you want)
	+ Simplification of results (can be a massive benefit)

----
## apply
Each of the members of the apply family function a little bit differently. The `apply()` function is probably the most straight forward.

<div align = "center">
<img src = assets/img/apply.png width = 1000 height = 600>
</div>

----
## Examples of `apply()`


```r
m <- matrix(1:12, ncol = 4)
m
```

```
##      [,1] [,2] [,3] [,4]
## [1,]    1    4    7   10
## [2,]    2    5    8   11
## [3,]    3    6    9   12
```


```r
# Mean of each row
apply(m, 1, mean)
```

```
## [1] 5.5 6.5 7.5
```

```r
# Mean of each column
apply(m, 2, mean)
```

```
## [1]  2  5  8 11
```

----
## A few more examples: LSAT data


```r
lsat <- read.csv("./data/LSAT_theta.csv")
head(lsat)
```

```
##   Item.1 Item.2 Item.3 Item.4 Item.5 Obs Exp   z1 se.z1
## 1      0      0      0      0      0   3 2.3 -1.9   0.8
## 2      0      0      0      0      0   3 2.3 -1.9   0.8
## 3      0      0      0      0      0   3 2.3 -1.9   0.8
## 4      0      0      0      0      1   6 5.9 -1.5   0.8
## 5      0      0      0      0      1   6 5.9 -1.5   0.8
## 6      0      0      0      0      1   6 5.9 -1.5   0.8
```

----
## Calculate raw scores


```r
lsat$raw <- apply(lsat[ ,1:5], 1, sum) # Only item-level data
head(lsat)
```

```
##   Item.1 Item.2 Item.3 Item.4 Item.5 Obs Exp   z1 se.z1 raw
## 1      0      0      0      0      0   3 2.3 -1.9   0.8   0
## 2      0      0      0      0      0   3 2.3 -1.9   0.8   0
## 3      0      0      0      0      0   3 2.3 -1.9   0.8   0
## 4      0      0      0      0      1   6 5.9 -1.5   0.8   1
## 5      0      0      0      0      1   6 5.9 -1.5   0.8   1
## 6      0      0      0      0      1   6 5.9 -1.5   0.8   1
```

```r
table(lsat$raw)
```

```
## 
##   0   1   2   3   4   5 
##   3  20  85 237 357 298
```

----
## Calculate p values


```r
apply(lsat[ ,1:5], 2, mean, na.rm = TRUE)
```

```
## Item.1 Item.2 Item.3 Item.4 Item.5 
##   0.92   0.71   0.55   0.76   0.87
```
Notice that additional arguments to the function (in this case `mean`) just
  get passed as additional arguments to `apply()`.

----
## One more example


```r
att <- read.delim("./data/attitude.txt")
head(att)
```

```
##   rating complaints privileges learning raises critical advance
## 1     43         51         30       39     61       92      45
## 2     63         64         51       54     63       73      47
## 3     71         70         68       69     76       86      48
## 4     61         63         45       47     54       84      35
## 5     81         78         56       66     71       83      47
## 6     43         55         49       44     54       49      34
```

----
## Center all but *learning* (which we'll say is our outcome)


```r
center <- function(x) x - mean(x, na.rm = TRUE) # write the centering function
att2 <- att # copy dataset
att2[ ,-4] <- apply(att[ ,-4], 2, center) # apply the function to all but the 4th column
head(att2)
```

```
##   rating complaints privileges learning raises critical advance
## 1  -21.6      -15.6      -23.1       39   -3.6     17.2     2.1
## 2   -1.6       -2.6       -2.1       54   -1.6     -1.8     4.1
## 3    6.4        3.4       14.9       69   11.4     11.2     5.1
## 4   -3.6       -3.6       -8.1       47  -10.6      9.2    -7.9
## 5   16.4       11.4        2.9       66    6.4      8.2     4.1
## 6  -21.6      -11.6       -4.1       44  -10.6    -25.8    -8.9
```

----
## Check that centering worked


```r
round( apply(att2, 2, mean, na.rm = TRUE), 2)
```

```
##     rating complaints privileges   learning     raises   critical 
##          0          0          0         56          0          0 
##    advance 
##          0
```

---- 
## Summing rows 

The following are equivalent


```r
apply(att, 1, sum)
```

```
##  [1] 361 415 488 389 482 328 392 428 478 403 387 387 373 450 482 443 513
## [18] 460 444 424 297 426 401 333 381 508 492 366 518 443
```

```r
rowSums(att)
```

```
##  [1] 361 415 488 389 482 328 392 428 478 403 387 387 373 450 482 443 513
## [18] 460 444 424 297 426 401 333 381 508 492 366 518 443
```
However, `rowSums` is optimized for speed (but it often doesn't have a huge
  practical impact)

----
## Summing columns

The same rules apply for summing collumns. The following are equivalent


```r
apply(att, 2, sum) 
```

```
##     rating complaints privileges   learning     raises   critical 
##       1939       1998       1594       1691       1939       2243 
##    advance 
##       1288
```

```r
colSums(att)
```

```
##     rating complaints privileges   learning     raises   critical 
##       1939       1998       1594       1691       1939       2243 
##    advance 
##       1288
```

but `colSums` is, again, optimized for speed

----
## Column and row means

No examples, but just a note that `colMeans()` and `rowMeans()` are equivalent
  optimized versions of `apply()` for computing the mean of a column or row.

----
## Guided Practice
* First, copy and run the following code to get the ChickWeight dataset


```r
# install.packages("openintro") # you will need to run this too
library(openintro)
data(gifted)
d <- gifted
head(d)
```

```
##   score fatheriq motheriq speak count read edutv cartoons
## 1   159      115      117    18    26  1.9   3.0      2.0
## 2   164      117      113    20    37  2.5   1.8      3.2
## 3   154      115      118    20    32  2.2   2.8      2.5
## 4   157      113      131    12    24  1.7   2.8      2.2
## 5   156      110      109    17    34  2.2   2.2      2.5
## 6   150      113      109    13    28  1.9   1.2      3.8
```

----
# Next, copy and run the following code to get data including only mother and father IQ scores


```r
iq <- d[ ,2:3]
```
Finally, use `apply()` to calculate the mean parent IQ score for each student. Add this variable back to the dataset using `cbind(d, iqM)`, where iqM is the mean parental IQ score.

<br> 

Repeat the previous steps again, but this time apply the **standardize** function to all variables *except* score.


```r
standardize <- function(x) (x - mean(x, na.rm = TRUE)) / sd(x, na.rm = TRUE)
```

----
## Final solutions: IQ total


```r
iqM <- apply(iq, 1, mean, na.rm = TRUE)

# Or equivalently
iqM <- rowMeans(iq, na.rm = TRUE)

# Merge back in
d <- cbind(d, iqM)
head(d)
```

```
##   score fatheriq motheriq speak count read edutv cartoons iqM
## 1   159      115      117    18    26  1.9   3.0      2.0 116
## 2   164      117      113    20    37  2.5   1.8      3.2 115
## 3   154      115      118    20    32  2.2   2.8      2.5 116
## 4   157      113      131    12    24  1.7   2.8      2.2 122
## 5   156      110      109    17    34  2.2   2.2      2.5 110
## 6   150      113      109    13    28  1.9   1.2      3.8 111
```

----
## Standardize solutions


```r
standardVars <- apply(d[ ,-1], 2, standardize)
standardVars <- as.data.frame(standardVars)
names(standardVars) <- paste0(names(standardVars), "_s")
d <- cbind(d, standardVars)
head(d)
```

```
##   score fatheriq motheriq speak count read edutv cartoons   iqM
## 1   159      115      117    18    26  1.9  3.00     2.00 116.0
## 2   164      117      113    20    37  2.5  1.75     3.25 115.0
## 3   154      115      118    20    32  2.2  2.75     2.50 116.5
## 4   157      113      131    12    24  1.7  2.75     2.25 122.0
## 5   156      110      109    17    34  2.2  2.25     2.50 109.5
## 6   150      113      109    13    28  1.9  1.25     3.75 111.0
##    fatheriq_s  motheriq_s    speak_s    count_s     read_s    edutv_s
## 1  0.06382999 -0.17935079  0.0000000 -1.0879645 -1.1470220  1.8633900
## 2  0.63829994 -0.79426776  0.6201737  1.4613488  1.7677633 -0.3726780
## 3  0.06382999 -0.02562154  0.6201737  0.3025700  0.3103707  1.4161764
## 4 -0.51063995  1.97285864 -1.8605210 -1.5514760 -2.1186171  1.4161764
## 5 -1.37234486 -1.40918474 -0.3100868  0.7660815  0.3103707  0.5217492
## 6 -0.51063995 -1.40918474 -1.5504342 -0.6244530 -1.1470220 -1.2671052
##   cartoons_s        iqM_s
## 1 -1.6922815 -0.129350332
## 2  0.2986379 -0.403268683
## 3 -0.8959137  0.007608843
## 4 -1.2940976  1.514159774
## 5 -0.8959137 -1.909819614
## 6  1.0950056 -1.498942088
```

----
## lapply and sapply
* `lapply()` allows you to apply a function to a **l**ist. You can also use it
   similarly to a `for` loop. In both cases, `lapply()` will return a **l**ist.
* `sapply()` does the same thing as `lapply()`, but simplifies the result if it
  can, into a vector, matrix, or array.

----
## Basic structure of an lapply loop
![lapply](./assets/img/lapply.png)

----
## Batch loading
# Alternative to for loop


```r
files <- list.files("./data/HSB_pieces/")
l <- lapply(seq_along(files), function(i) {
  read.csv(paste0("./data/HSB_pieces/", files[i]))
})
names(l) <- substr(files, 1, nchar(files) - 4)
str(l)
```

```
## List of 4
##  $ NonWhiteFemaleHSB:'data.frame':	1065 obs. of  5 variables:
##   ..$ id      : int [1:1065] 1224 1288 1296 1296 1296 1296 1296 1296 1296 1296 ...
##   ..$ minority: int [1:1065] 1 1 1 1 1 1 1 1 1 1 ...
##   ..$ female  : int [1:1065] 1 1 1 1 1 1 1 1 1 1 ...
##   ..$ ses     : num [1:1065] -1.248 -1.468 -0.148 -1.568 -0.288 ...
##   ..$ mathach : num [1:1065] 4.75 10.66 12.67 4.97 8.28 ...
##  $ NonWhiteMaleHSB  :'data.frame':	909 obs. of  5 variables:
##   ..$ id      : int [1:909] 1224 1224 1224 1288 1288 1296 1296 1296 1296 1296 ...
##   ..$ minority: int [1:909] 1 1 1 1 1 1 1 1 1 1 ...
##   ..$ female  : int [1:909] 0 0 0 0 0 0 0 0 0 0 ...
##   ..$ ses     : num [1:909] -1.528 0.142 -1.658 -0.328 -0.158 ...
##   ..$ mathach : num [1:909] 4.145 -1.688 0.122 10.171 5.552 ...
##  $ WhiteFemaleHSB   :'data.frame':	2730 obs. of  5 variables:
##   ..$ id      : int [1:2730] 1224 1224 1224 1224 1224 1224 1224 1224 1224 1224 ...
##   ..$ minority: int [1:2730] 0 0 0 0 0 0 0 0 0 0 ...
##   ..$ female  : int [1:2730] 1 1 1 1 1 1 1 1 1 1 ...
##   ..$ ses     : num [1:2730] -1.528 -0.588 -0.618 -0.888 -1.448 ...
##   ..$ mathach : num [1:2730] 5.88 19.71 -2.83 1.53 9.47 ...
##  $ WhiteMaleHSB     :'data.frame':	2481 obs. of  5 variables:
##   ..$ id      : int [1:2481] 1224 1224 1224 1224 1224 1224 1224 1224 1224 1224 ...
##   ..$ minority: int [1:2481] 0 0 0 0 0 0 0 0 0 0 ...
##   ..$ female  : int [1:2481] 0 0 0 0 0 0 0 0 0 0 ...
##   ..$ ses     : num [1:2481] -0.528 -0.668 -0.158 0.022 -0.998 -0.458 -0.468 0.332 -0.298 -0.078 ...
##   ..$ mathach : num [1:2481] 20.349 8.781 17.898 4.583 0.523 ...
```

----
## Create group-standardized mathach variable


```r
standardize <- function(x) (x - mean(x, na.rm = TRUE)) / (sd(x, na.rm = TRUE))
l <- lapply(l, function(x) {
  x$mathach_z <- standardize(x$mathach)
  return(x) # This part is important if you want the full data frame returned
})
str(l)
```

```
## List of 4
##  $ NonWhiteFemaleHSB:'data.frame':	1065 obs. of  6 variables:
##   ..$ id       : int [1:1065] 1224 1288 1296 1296 1296 1296 1296 1296 1296 1296 ...
##   ..$ minority : int [1:1065] 1 1 1 1 1 1 1 1 1 1 ...
##   ..$ female   : int [1:1065] 1 1 1 1 1 1 1 1 1 1 ...
##   ..$ ses      : num [1:1065] -1.248 -1.468 -0.148 -1.568 -0.288 ...
##   ..$ mathach  : num [1:1065] 4.75 10.66 12.67 4.97 8.28 ...
##   ..$ mathach_z: num [1:1065] -0.695 0.249 0.568 -0.661 -0.132 ...
##  $ NonWhiteMaleHSB  :'data.frame':	909 obs. of  6 variables:
##   ..$ id       : int [1:909] 1224 1224 1224 1288 1288 1296 1296 1296 1296 1296 ...
##   ..$ minority : int [1:909] 1 1 1 1 1 1 1 1 1 1 ...
##   ..$ female   : int [1:909] 0 0 0 0 0 0 0 0 0 0 ...
##   ..$ ses      : num [1:909] -1.528 0.142 -1.658 -0.328 -0.158 ...
##   ..$ mathach  : num [1:909] 4.145 -1.688 0.122 10.171 5.552 ...
##   ..$ mathach_z: num [1:909] -0.9376 -1.7968 -1.5301 -0.0499 -0.7303 ...
##  $ WhiteFemaleHSB   :'data.frame':	2730 obs. of  6 variables:
##   ..$ id       : int [1:2730] 1224 1224 1224 1224 1224 1224 1224 1224 1224 1224 ...
##   ..$ minority : int [1:2730] 0 0 0 0 0 0 0 0 0 0 ...
##   ..$ female   : int [1:2730] 1 1 1 1 1 1 1 1 1 1 ...
##   ..$ ses      : num [1:2730] -1.528 -0.588 -0.618 -0.888 -1.448 ...
##   ..$ mathach  : num [1:2730] 5.88 19.71 -2.83 1.53 9.47 ...
##   ..$ mathach_z: num [1:2730] -1.11 1.028 -2.455 -1.782 -0.553 ...
##  $ WhiteMaleHSB     :'data.frame':	2481 obs. of  6 variables:
##   ..$ id       : int [1:2481] 1224 1224 1224 1224 1224 1224 1224 1224 1224 1224 ...
##   ..$ minority : int [1:2481] 0 0 0 0 0 0 0 0 0 0 ...
##   ..$ female   : int [1:2481] 0 0 0 0 0 0 0 0 0 0 ...
##   ..$ ses      : num [1:2481] -0.528 -0.668 -0.158 0.022 -0.998 -0.458 -0.468 0.332 -0.298 -0.078 ...
##   ..$ mathach  : num [1:2481] 20.349 8.781 17.898 4.583 0.523 ...
##   ..$ mathach_z: num [1:2481] 0.824 -0.892 0.461 -1.514 -2.117 ...
```

----
## Example without return


```r
standardized <- lapply(l, function(x) standardize(x$mathach))
str(standardized)
```

```
## List of 4
##  $ NonWhiteFemaleHSB: num [1:1065] -0.695 0.249 0.568 -0.661 -0.132 ...
##  $ NonWhiteMaleHSB  : num [1:909] -0.9376 -1.7968 -1.5301 -0.0499 -0.7303 ...
##  $ WhiteFemaleHSB   : num [1:2730] -1.11 1.028 -2.455 -1.782 -0.553 ...
##  $ WhiteMaleHSB     : num [1:2481] 0.824 -0.892 0.461 -1.514 -2.117 ...
```

----
## Revisiting the convoluted random matrix from last time


```r
m <- matrix(rep(NA, 40*100), ncol = 100)

for(i in 1:40) {
  for(j in seq(0, 500, length.out = 40)[i]) {
    m[i, ] <- rnorm(100, 0, j)
  }
}
head(m)
```

```
##        [,1]   [,2]  [,3] [,4]  [,5]  [,6]   [,7] [,8]  [,9]  [,10] [,11]
## [1,]    0.0    0.0   0.0    0   0.0   0.0   0.00    0   0.0   0.00   0.0
## [2,]  -10.3    9.5  17.7  -22 -19.5  -1.1   0.77   12   7.1  -7.63   8.5
## [3,]  -18.4   -1.6  24.7   27  -6.9 -10.5 -21.65  -28 -26.9  -3.10  -0.6
## [4,]    4.5   -3.9   8.4   10 -30.0  15.2  27.92   12   3.2  -0.23 -51.7
## [5,]   14.3   69.1  43.4  -35 -49.4 -45.1 -72.36   18   5.0  72.52 -51.5
## [6,] -151.2 -116.5 -66.8   64 -36.2  74.4  25.42  -64  44.3 -37.40  70.8
##      [,12]  [,13] [,14]  [,15] [,16] [,17] [,18] [,19]  [,20] [,21] [,22]
## [1,]   0.0    0.0     0   0.00     0   0.0   0.0   0.0   0.00   0.0     0
## [2,] -19.5   -9.2   -13 -33.88    13   1.7   2.3  -3.7  10.57  -1.1    -8
## [3,]  26.9  -28.0    36 -23.15   -33  45.0  34.5 -43.7  -0.58 -22.4   -13
## [4,]  26.6  -11.5   -33  15.21   -63 -81.3 -14.7 -18.6  -4.90  48.0   -42
## [5,]   8.1    4.5   -12  -0.36    18 -56.1 -54.3   8.0 -56.64  37.1    12
## [6,]  77.4 -113.9   -41  65.04   -22 -29.8  36.2  -1.5   3.22 -21.3   -46
##      [,23] [,24]  [,25]  [,26] [,27] [,28]  [,29] [,30] [,31]  [,32] [,33]
## [1,]   0.0   0.0   0.00   0.00     0   0.0   0.00   0.0   0.0    0.0   0.0
## [2,]  -9.2  12.4 -15.61  -6.29    13  -8.5   0.43   4.4  -2.8   -6.7  10.0
## [3,] -42.0  34.4  14.17 -24.90    28  21.6  -2.15 -14.7   2.2   -4.4 -23.2
## [4,]  32.4  18.1  -0.47   4.28   -14  34.7  59.80 -49.1 -34.7 -110.0  -2.6
## [5,]  59.8 100.6 -82.46 -55.11   -36  62.5  30.66  33.5 -14.8   25.9  93.9
## [6,] 102.7   8.1 -36.55   0.68    45 -10.4 -29.17 -11.3  65.3  101.3  26.5
##       [,34]  [,35] [,36] [,37] [,38] [,39]  [,40] [,41]  [,42] [,43] [,44]
## [1,]    0.0   0.00   0.0     0   0.0     0   0.00   0.0   0.00   0.0     0
## [2,]   14.2  -0.27   5.5    19  -4.9    17  -0.54  -2.1   0.25  -3.1   -15
## [3,]   -6.6 -12.36 -26.5    29 -49.0   -11  29.43  19.9  21.50  28.7   -13
## [4,]   30.6 -34.43 -25.1   -46  38.5    37   5.78  25.9 -36.52   4.9   -12
## [5,]  -35.9 -10.28  20.9    -4  78.2    24 -13.65  31.3  -8.13  25.3   -29
## [6,] -140.1  41.43  56.5   -28 -19.8    21 148.50 -23.0 -76.39  92.6   -19
##       [,45] [,46] [,47] [,48] [,49] [,50]  [,51] [,52] [,53] [,54] [,55]
## [1,]    0.0   0.0     0   0.0   0.0     0   0.00   0.0   0.0   0.0   0.0
## [2,]  -13.7   4.9   -14  -5.0  -0.3    16 -16.10  -5.9  -2.6  -6.9  -3.0
## [3,]   -6.3   8.9    -4   3.4  15.8   -29  -0.96 -44.6  -9.1  17.6   8.8
## [4,]   27.1 -36.9    50  36.3  -5.5   -59 -44.49  13.0 -51.8 -24.4 -51.8
## [5,]   -3.9 -45.4    20  95.1  -5.3   157  71.88 -26.6  26.1  -8.2  -9.9
## [6,] -131.7  -1.9    36 -18.2 -35.3   -26 -77.25  42.5 -58.2  36.1  94.6
##       [,56] [,57] [,58] [,59] [,60] [,61] [,62]  [,63] [,64] [,65]  [,66]
## [1,]    0.0   0.0     0   0.0   0.0   0.0   0.0    0.0     0     0    0.0
## [2,]   33.3 -16.9    10  -5.3  -7.9   2.9   2.8    1.9    11     4   11.9
## [3,]   -8.4   6.0    27   3.1 -25.0 -16.2 -53.1   32.3   -31   -26  -63.5
## [4,]   22.3  -1.1   -60 -24.8  39.7  19.8 -13.0  -29.0   -43   -11   -9.2
## [5,] -159.6  72.5    42  80.4  41.3 -72.6  48.8  -11.2   -12    33   24.5
## [6,]   -9.0  29.8   -10 -25.8   8.6  11.4 -29.5 -146.0    28    44 -106.5
##      [,67] [,68] [,69]  [,70] [,71]  [,72] [,73] [,74] [,75] [,76] [,77]
## [1,]   0.0     0   0.0    0.0     0   0.00     0   0.0     0   0.0   0.0
## [2,]  13.5   -14   4.7   -9.0     7  19.06   -12   4.9    14  -2.9  -9.8
## [3,]  11.7   -23 -11.2   21.7    18   3.09    14  12.1     1 -13.8  42.7
## [4,] -57.7   -22 -14.3    5.5    46  -0.75    31  19.0   -44   4.7  35.5
## [5,]  -6.3    40   6.1  -79.2    91  22.93   -60 -18.8   -71  39.8   4.7
## [6,]  38.2   -10  10.5 -142.3   -87 186.84  -121 -42.5    97 -13.2 -38.7
##      [,78] [,79] [,80]  [,81] [,82] [,83] [,84] [,85]  [,86] [,87] [,88]
## [1,]   0.0     0   0.0   0.00   0.0   0.0   0.0  0.00    0.0   0.0     0
## [2,]  17.4    24  -2.6 -23.59  -6.2   4.2  15.6  0.51   -5.5 -10.2    13
## [3,]  -9.8    32 -28.1  16.46  -9.0 -22.9   4.7 25.06  -30.8  20.6    22
## [4,]  37.7    11   1.6 -90.47  11.5 -64.7  28.3 20.13   -4.7 -28.8   -76
## [5,]   7.7   -41 -48.8   7.17   2.9 -14.0 -62.2 49.17   67.1   9.4  -138
## [6,] 141.5    13 -40.9   0.76  42.5  67.8 -38.1 19.75 -140.7  -4.8   -87
##      [,89]  [,90] [,91]  [,92] [,93] [,94]   [,95] [,96] [,97]  [,98]
## [1,]     0   0.00     0   0.00     0   0.0    0.00   0.0   0.0   0.00
## [2,]   -13  18.32   -23   0.59   -20  18.1   -0.09  -7.5  13.1  -0.89
## [3,]    42 -10.41    26   5.51    32 -12.6  -16.46 -10.0   6.3  15.40
## [4,]   109  23.79    35 -96.51   -30  55.5  -21.86 -73.4 -38.0 -39.50
## [5,]    39  -0.41   -66  11.55   -34   7.7 -117.41  20.6  61.0  22.51
## [6,]    43   3.66    82 -41.83   -22 -39.5  -29.13  68.8 -81.0   9.28
##       [,99] [,100]
## [1,]   0.00    0.0
## [2,]   0.82  -20.6
## [3,] -41.67   48.6
## [4,] -51.14    3.5
## [5,] -63.66  105.6
## [6,]  51.47  -34.6
```

----
## Creating the same matrix with lapply


```r
norm <- lapply(seq(0, 500, length.out = 40), function(i) rnorm(100, 0, i))
str(norm)
```

```
## List of 40
##  $ : num [1:100] 0 0 0 0 0 0 0 0 0 0 ...
##  $ : num [1:100] 2.499 16.288 4.403 5.363 -0.143 ...
##  $ : num [1:100] 4.996 40.758 32.785 6.043 -0.414 ...
##  $ : num [1:100] -20.8 56.4 21.5 20.6 -58.2 ...
##  $ : num [1:100] -28.4 -29.5 -10 -62 -27 ...
##  $ : num [1:100] 60.71 28.37 -4.44 -88.56 13.38 ...
##  $ : num [1:100] 65.2 66.5 -105.8 -35.9 143.8 ...
##  $ : num [1:100] -2.28 -52.3 -64.79 31.45 111.7 ...
##  $ : num [1:100] 62.5 171.3 -83.5 116.1 -80.6 ...
##  $ : num [1:100] -75.5 161.8 59.8 76.2 45.9 ...
##  $ : num [1:100] -117.8 -78.6 -24 -54.9 111.6 ...
##  $ : num [1:100] 192.63 -76.82 46.84 111.26 -1.06 ...
##  $ : num [1:100] -19.6 -66.9 293.9 10.4 -96.7 ...
##  $ : num [1:100] -16.8 155.8 130 -300.9 141.6 ...
##  $ : num [1:100] 51.1 69.3 -41.3 247.7 -66.8 ...
##  $ : num [1:100] -87.23 165.91 4.86 -156.17 -219.46 ...
##  $ : num [1:100] -107.2 -250 -310.8 -59.4 27.4 ...
##  $ : num [1:100] -143.8 35.2 -151.3 132.6 -680.9 ...
##  $ : num [1:100] 472.2 -156.7 -77 -38.6 -288.6 ...
##  $ : num [1:100] 485.09 -8.63 299.88 -15.1 513.56 ...
##  $ : num [1:100] 269.19 -389.09 -17.02 -60.9 9.27 ...
##  $ : num [1:100] -101.6 -47.6 -784.8 -32.4 228.9 ...
##  $ : num [1:100] -200 -237 127 251 135 ...
##  $ : num [1:100] -61.62 -662.25 7.96 -175.3 -318.5 ...
##  $ : num [1:100] -178.2 143.1 228.9 91.1 -282.1 ...
##  $ : num [1:100] -10.5 188.6 -536.9 -420.2 560.2 ...
##  $ : num [1:100] 11.24 -646.34 -194.4 606.25 1.03 ...
##  $ : num [1:100] -319.4 132 -223.6 83.6 -163.5 ...
##  $ : num [1:100] 367.9 169.4 -83.9 504.8 -740.7 ...
##  $ : num [1:100] 91.8 -28.9 -606.8 -28.7 381.1 ...
##  $ : num [1:100] 75.2 -312.6 739.7 83 403.9 ...
##  $ : num [1:100] -207.8 -520.2 -97.5 -50.2 -308.5 ...
##  $ : num [1:100] 32.8 -34.7 -512 -32.5 398.3 ...
##  $ : num [1:100] 186.4 -588.9 233.3 -159.8 -14.7 ...
##  $ : num [1:100] 30.2 167.3 -47.7 125.6 297.1 ...
##  $ : num [1:100] 207.3 -814.4 -49.1 -146.5 254.1 ...
##  $ : num [1:100] 453 -151 -665 -212 351 ...
##  $ : num [1:100] -308 -360.8 425.3 44.5 209.8 ...
##  $ : num [1:100] -149.9 488.9 -476 241.1 -89.8 ...
##  $ : num [1:100] 86.3 -490.6 276.2 -344.1 285.5 ...
```

----

```r
m <- matrix(unlist(norm), ncol = 100, byrow = TRUE)
head(m)
```

```
##       [,1] [,2]  [,3]  [,4]   [,5]  [,6]  [,7]  [,8]  [,9] [,10] [,11]
## [1,]   0.0    0   0.0   0.0   0.00   0.0   0.0   0.0   0.0   0.0   0.0
## [2,]   2.5   16   4.4   5.4  -0.14  -8.2   1.7  -7.8  -8.0 -13.1  -8.4
## [3,]   5.0   41  32.8   6.0  -0.41  23.8  -3.6 -40.8  18.9 -12.8  13.4
## [4,] -20.8   56  21.5  20.6 -58.18 -54.7  51.4 -38.0 -43.6   5.5 -23.9
## [5,] -28.4  -29 -10.0 -62.0 -26.96 -34.9 101.1 -29.8  -2.3  60.7 -41.2
## [6,]  60.7   28  -4.4 -88.6  13.38 -28.2  70.4 -33.1 119.4 -37.4  52.3
##      [,12] [,13]  [,14] [,15]   [,16] [,17]  [,18] [,19] [,20]  [,21]
## [1,]   0.0   0.0   0.00   0.0   0.000   0.0   0.00     0     0   0.00
## [2,]   7.6  -5.7   0.49   4.3  10.445  11.7  13.02   -17    13   0.27
## [3,]  67.2 -18.5  -3.20  12.6   0.082   9.7  -6.57   -30    12 -14.24
## [4,]   7.7 -10.2  20.23 -60.0 103.606  26.7   0.84    46   -18  42.94
## [5,]  22.6  80.7 -58.34 -44.6   3.072 -16.2 -57.15   -13    59  22.83
## [6,] -70.9 142.8 134.59 -31.7   9.487  97.1 -13.75    52    70  43.72
##      [,22] [,23]  [,24] [,25]  [,26] [,27] [,28] [,29]  [,30] [,31] [,32]
## [1,]   0.0   0.0   0.00   0.0   0.00   0.0   0.0   0.0   0.00   0.0   0.0
## [2,]   2.2  -9.3  -0.38  10.1  -0.65  -2.5  -7.3 -14.5 -10.02  15.0  -7.7
## [3,]  -6.5  28.8  -1.67 -21.5 -47.65  29.9  16.0  45.7   0.49  -6.5 -10.0
## [4,]  35.2 -46.5  22.54  38.3  62.07   4.0 -88.8  51.5  28.53   9.6  27.4
## [5,] -45.8 -29.9 -41.34  -1.7  25.90 -43.8  90.5 -37.0  22.50  29.6  81.9
## [6,]  -7.2 -13.0 -30.22 -11.9  68.19  57.2  65.0   8.8  49.80  20.2  64.5
##      [,33]  [,34] [,35] [,36] [,37]  [,38] [,39] [,40] [,41] [,42] [,43]
## [1,]     0   0.00   0.0   0.0   0.0    0.0   0.0     0   0.0     0     0
## [2,]   -11  -0.44  -4.9  15.1  35.3  -26.8   9.1    -2  -9.3   -12    16
## [3,]   -12 -13.34  -2.5 -19.3  -3.1   -1.4  -1.5    17 -11.7    17   -39
## [4,]   -28 -52.47 -56.4  56.3 -72.0  -12.4  45.4   -54  49.4   -30     5
## [5,]    29 -61.86  30.1  -8.5 -35.7 -108.9 -37.9    62  -7.1    32   -58
## [6,]   -51 -39.05 -28.0 -35.1  -4.3   78.4 -54.1    13 -68.0  -130   -44
##      [,44]  [,45]  [,46] [,47] [,48] [,49] [,50]   [,51] [,52] [,53] [,54]
## [1,]   0.0   0.00   0.00   0.0   0.0   0.0   0.0    0.00     0     0     0
## [2,]  -2.4  -3.31  -0.35 -21.5  11.6   6.9   8.4    0.61   -18    13    -8
## [3,]  57.4   2.87  39.90 -21.5  -1.3 -21.0  16.5    2.53    13    25    23
## [4,] -12.2  52.13 -49.53  13.0  39.1  10.8  42.7   22.43   -17    58   -35
## [5,]   5.6 -72.36  32.51 -65.0 -48.2 -77.4 -89.6   97.52   -24    52     9
## [6,] -87.3  -0.47  -3.78   2.5 -56.9   6.4  50.5 -132.27   -44   -67    34
##      [,55]  [,56] [,57] [,58] [,59]   [,60] [,61] [,62] [,63] [,64] [,65]
## [1,]   0.0    0.0   0.0     0     0    0.00   0.0     0     0   0.0   0.0
## [2,] -14.0   10.2 -11.0   -28   -15   -4.15 -11.2    45    11  -8.3   7.2
## [3,] -20.4   -2.5  41.3    11    18   -1.89  17.1    31   -13  32.6   4.4
## [4,] -27.1  -31.8  30.7    34   -49  -19.63  -7.8   -15   -83 -20.0  48.3
## [5,] -49.9   45.2  -2.5   -92   -24 -103.52  80.8   -54   -32 116.6  96.2
## [6,]  -1.2 -109.2 166.2    94   -20    0.11 -42.2    35   -78  -5.9  67.2
##      [,66]  [,67] [,68] [,69] [,70] [,71] [,72] [,73] [,74] [,75] [,76]
## [1,]     0   0.00     0   0.0   0.0   0.0   0.0   0.0   0.0   0.0   0.0
## [2,]   -16  -0.98   -25   5.6  -7.1 -25.0  14.3  11.6   2.0  -9.3  -9.4
## [3,]   -17  19.26   -12  19.6   1.9   3.9   5.3  -4.5   2.5  -3.2   5.2
## [4,]   -28 -40.32   -84  26.2  20.6 -34.3 -19.8  16.4  -1.6  -4.6  -4.6
## [5,]    36 -66.54    77  13.4  -3.2  22.4   6.0  14.1  12.8 -44.5  62.8
## [6,]    59 130.61   -55 -58.6 -42.9  27.3 -77.4  16.8   9.4 100.6  24.1
##       [,77] [,78] [,79] [,80]  [,81]  [,82] [,83] [,84] [,85] [,86]  [,87]
## [1,]   0.00   0.0   0.0     0   0.00   0.00   0.0   0.0   0.0   0.0   0.00
## [2,]   0.95   1.5  -8.2    23   0.19   0.65  -5.1  -1.1  -3.5  -3.3  -0.63
## [3,]  28.48 -15.1 -10.3    18 -16.39   4.38 -41.2 -25.1  14.5  44.1  14.67
## [4,] -41.55  -1.0 -18.7    78 -46.56 -40.62 -37.3 -72.0  32.5   5.6   2.69
## [5,] 125.09  11.2  44.0    54  15.87  36.11  28.2 -51.6  58.9   8.9  72.42
## [6,]  39.78 -34.1  26.3    35  45.76  53.64  29.8 -23.2  68.5  12.4 123.91
##      [,88] [,89] [,90] [,91] [,92] [,93] [,94] [,95]  [,96] [,97] [,98]
## [1,]   0.0     0   0.0   0.0     0   0.0     0   0.0   0.00   0.0   0.0
## [2,]  -2.3    14   1.3   7.7   -20  11.1   -26  -3.1  -0.59   6.9  -1.1
## [3,] -24.4   -17 -24.7 -20.6    17   6.8   -22  15.4  13.82  23.4  -9.5
## [4,]  37.1   -28 -59.3  49.0    66  20.8    20  -9.0  15.37 -11.3 -30.0
## [5,]  52.9   -31 -77.7  92.4    97 -33.6   -20  28.1 -43.56  37.7 -12.1
## [6,]  75.3    57 -32.3  59.9   -50   1.4   122 -60.3 187.27  51.6  10.4
##      [,99] [,100]
## [1,]   0.0    0.0
## [2,]  11.2   -3.6
## [3,] -22.4   35.0
## [4,]  -6.6  -23.9
## [5,] -32.4  -28.8
## [6,] 120.6  118.6
```

----
## Even better, use sapply


```r
m <- sapply(seq(0, 500, length.out = 40), function(i) rnorm(100, 0, i))
head(m) 
```

```
##      [,1]  [,2]  [,3]  [,4] [,5] [,6]   [,7] [,8]   [,9]  [,10] [,11]
## [1,]    0  26.6   9.3   8.8  -57   18 -112.9  -61  176.8 -173.2   144
## [2,]    0  -9.5 -21.8  31.0  -35  -23  -75.5  188  -65.6  119.9   209
## [3,]    0  -5.2  22.0  14.7  -29  -49  -36.1  112   -9.6 -337.9  -132
## [4,]    0  -3.4 -31.5  10.1  -20  -59    8.2  -85 -354.5   49.4    56
## [5,]    0   7.8  12.6  43.9   16  -19   30.0  -83   39.3   63.1   335
## [6,]    0 -12.5  12.7 -48.6 -103   51   39.8   25   22.1   -5.3   -19
##      [,12] [,13] [,14] [,15]  [,16] [,17] [,18] [,19] [,20] [,21] [,22]
## [1,]    85   328    71 -95.8    3.1  -230  -314   6.3  -347    52   -32
## [2,]   169   411   371  24.6 -376.9   186   -76 174.1   250  -177   210
## [3,]    70    48   252 -28.0  -67.5   235   485 -66.4  -141  -263   -72
## [4,]   -28    38   -29  34.3  130.8   121  -478 424.1   193  -191    40
## [5,]    41    55   -92   4.6  304.8   161   186 -95.3    42    38  -303
## [6,]   -33   161   162  40.0   96.2   233   -95 -59.1    77   133   109
##      [,23] [,24] [,25] [,26] [,27] [,28]  [,29] [,30] [,31] [,32] [,33]
## [1,]   355  -123   168   170  -760  -749  231.8   180   222   764   161
## [2,]  -367  -243   395   211   214  -461 -197.6  -315    59    85  -380
## [3,]   690    38  -395   329   422  -826  225.5   137    33  -727  -733
## [4,]  -116   237   -40   313  -187   -51    8.7   621  -394  -422  -354
## [5,]   616  -247   288   -78    71  -280   57.4   257   101    61    75
## [6,]   -41   -74    18   -59   201  -541  218.1   -49   272  -405   678
##       [,34] [,35] [,36] [,37]  [,38] [,39]   [,40]
## [1,]  683.3   163 816.3  -247  -81.1   341 -111.34
## [2,]  341.1  -873 391.4   802  335.9  -317    0.92
## [3,]  535.1   373 376.5   563 -567.2   564 -422.82
## [4,]    8.8  -347 -25.9  -306   33.5   512  335.66
## [5,]  405.1  -339 954.3  -475  -51.4  -107 -718.66
## [6,] -717.6   446  -9.2  -106    9.4   101 -647.97
```

----
Note that by default, sapply returned the transpose of the matrix we were
 going for before. That's really not a problem, now each column represent 100 draws from the corresponding random normal distribution rather than rows. We can easily verify this.


```r
nrow(m)
```

```
## [1] 100
```

```r
ncol(m)
```

```
## [1] 40
```
<br>
Of course, we can also easily get the matrix back by just transposing it.


```r
m <- t(m)
head(m)
```

```
##       [,1]  [,2]  [,3]  [,4]  [,5] [,6] [,7] [,8] [,9] [,10] [,11] [,12]
## [1,]   0.0   0.0   0.0   0.0   0.0    0  0.0  0.0  0.0   0.0     0   0.0
## [2,]  26.6  -9.5  -5.2  -3.4   7.8  -12 10.8 -4.5  3.5  17.7    11   6.6
## [3,]   9.3 -21.8  22.0 -31.5  12.6   13  6.9 17.4 -4.9  17.5    27  22.3
## [4,]   8.8  31.0  14.7  10.1  43.9  -49 35.6  5.8 -6.3  -7.7   -35 -32.5
## [5,] -56.9 -35.1 -28.6 -20.2  16.0 -103 27.3  7.4 35.9 -95.0    49 -22.6
## [6,]  18.4 -22.8 -49.3 -59.2 -19.2   51 44.0 43.7 80.3 119.7   -18 -87.2
##      [,13] [,14] [,15] [,16] [,17] [,18] [,19]  [,20] [,21]  [,22]  [,23]
## [1,]   0.0   0.0   0.0   0.0   0.0     0   0.0   0.00     0    0.0   0.00
## [2,]   6.4  20.1   9.6  -7.1   6.0    -2 -24.6   0.57   -11    1.4   2.79
## [3,]   4.9  19.2  30.5 -30.9   4.2   -16   3.3   2.78   -13    7.3 -44.79
## [4,]   4.9 -29.8  20.5  46.9 -63.4    40 -57.9  11.21    77   -4.0  53.02
## [5,]  33.2  75.6  24.8 -47.4  26.4    11  14.6  75.21    46 -114.4  -0.89
## [6,]  33.7  -1.9 -51.4 -99.0  24.0   -10  -9.0 -34.37    57   43.2 -24.74
##      [,24]  [,25] [,26] [,27] [,28] [,29] [,30] [,31] [,32] [,33] [,34]
## [1,]   0.0   0.00   0.0     0   0.0   0.0     0     0     0   0.0   0.0
## [2,]   8.8   9.74  -3.0   -25  15.8  11.5    18    14    12   4.4  19.7
## [3,]  -6.5   0.72  42.8   -20  -4.3  21.7   -12    48    29 -13.9  -3.9
## [4,] -34.6 -12.28  -5.0    35 -10.2  -3.8   -30   -81    13   6.1 -31.9
## [5,]  34.4 -54.90  -5.3   -27 -27.7  62.0    41   -67   -84 -35.4  31.7
## [6,]   4.1  56.42  42.5    75 -43.2  -9.9   -52   -12   -31  73.4 -24.6
##       [,35]  [,36] [,37] [,38] [,39] [,40] [,41] [,42] [,43]  [,44] [,45]
## [1,]   0.00   0.00   0.0   0.0   0.0   0.0   0.0   0.0     0    0.0   0.0
## [2,]   6.18  -7.87  29.7   2.9   4.8   2.1   6.5  -3.9   -23   -2.5  -5.8
## [3,]   0.75  -0.69  -7.9  24.2  24.4 -22.5  22.3  21.0    38    7.7   7.5
## [4,] -38.62 -53.11  50.5 -74.2 -12.8 -34.3  40.6  15.9   -52  -44.1  -3.8
## [5,]  19.83  30.45 -61.1 -73.8 -50.3  95.6   5.6 -68.3   -90   98.5  -6.2
## [6,]   2.12   2.31   4.1  21.8 132.5 -40.1  98.1  69.4    45 -137.1 -11.5
##      [,46] [,47] [,48] [,49] [,50] [,51] [,52]  [,53] [,54] [,55]  [,56]
## [1,]   0.0   0.0   0.0   0.0   0.0     0   0.0    0.0   0.0     0   0.00
## [2,] -14.8  -1.9   9.4  -8.1 -23.2   -12  10.5    3.1   9.9   -11   0.20
## [3,]   1.8  45.4  41.2  14.3  18.8   -53  -5.1   39.0  41.9   -10   0.64
## [4,]  36.9  36.3  37.3  -2.3  -5.7   -35  -6.4  -14.8  -4.4   -57  63.87
## [5,]  26.3  -6.9 -14.8  16.0   3.6    -7  61.1  -24.4  61.6   -66 103.97
## [6,] -43.1 -54.6   2.2  73.9  12.5   -13 -22.5 -122.2 -41.3   -38  32.19
##      [,57] [,58] [,59] [,60] [,61] [,62] [,63] [,64] [,65] [,66] [,67]
## [1,]   0.0   0.0     0   0.0   0.0   0.0   0.0     0   0.0     0   0.0
## [2,]  -2.8 -14.8     3  21.5   1.9  18.4   2.6    13   1.7   -11 -24.1
## [3,] -28.5  -8.9   -23  23.1  37.6 -14.9   9.6    10 -17.5   -32   1.6
## [4,]  38.9  48.5    48  22.2  10.0 -26.8   4.2   -47  50.6   -36  11.3
## [5,]  21.2  82.4   -23 -50.0 -34.1  -6.4  28.3   -75  51.0    53  46.4
## [6,] -13.9  -8.3    95  -6.7 -36.7 -14.9 -13.6    99 -87.0   124 140.2
##      [,68] [,69] [,70] [,71]  [,72] [,73] [,74] [,75] [,76] [,77] [,78]
## [1,]   0.0   0.0   0.0   0.0    0.0   0.0   0.0   0.0   0.0     0   0.0
## [2,]  -7.2   2.9 -14.3   2.1  -14.4 -15.0   5.4   7.5   5.5    21   3.5
## [3,]  23.7  25.4 -14.8 -13.5    8.9   7.3  30.2  -2.6  11.6    16   7.2
## [4,] -11.4  68.8   4.6 -53.2  -40.0  11.2 -44.0  33.1  26.2    58   9.7
## [5,]  11.8 -28.0 -28.1 110.8   -7.4  29.8 -14.7  17.1  58.9   -44  92.8
## [6,]  47.4 -41.3  11.2 -95.5 -123.8  53.4 104.5 -45.4 -62.5    88  44.8
##      [,79] [,80] [,81] [,82] [,83] [,84] [,85] [,86] [,87] [,88] [,89]
## [1,]     0   0.0   0.0     0   0.0   0.0     0   0.0     0   0.0   0.0
## [2,]   -35  11.9  -4.5   -14  32.0 -10.2    -8   6.1   -21   3.7  10.7
## [3,]    32   5.5  12.9    45   3.8  -7.8    22  32.7    48  21.3  -1.8
## [4,]   -51  11.3   1.4    27 -24.5  46.0    19 -34.5    43  73.3 115.1
## [5,]   -47  29.7   7.8    39 -47.3 -54.2    87 -45.5     9 -39.3  34.1
## [6,]   -20 -58.8  35.3   -10 -30.1 -28.9  -133  83.0   -40 136.0  85.5
##      [,90] [,91] [,92] [,93] [,94] [,95] [,96] [,97] [,98] [,99] [,100]
## [1,]   0.0   0.0  0.00   0.0   0.0     0   0.0   0.0   0.0     0    0.0
## [2,]   3.3 -11.0 -0.14 -13.8  -2.5    20 -18.9 -15.7 -10.2   -20   11.6
## [3,]  -7.3  -6.7  3.35   9.4  17.4    24 -17.8   5.5   9.4   -75    6.8
## [4,]  55.1 -55.4 24.56   9.6  -1.8    52  40.5  24.6  25.7    17   53.4
## [5,]   5.8 -62.5 70.61  -7.7  59.1    13   3.6 -29.4  34.5   -28   67.7
## [6,] -42.4  96.1 10.27 -42.3  -6.7   -70  67.8  48.0 -62.7   -62   -9.0
```

----
## Contrasting lapply and sapply


```r
sapply(l, function(x) cor(x$ses, x$mathach_z, use = "complete.obs"))
```

```
## NonWhiteFemaleHSB   NonWhiteMaleHSB    WhiteFemaleHSB      WhiteMaleHSB 
##              0.32              0.26              0.34              0.28
```


```r
lapply(l, function(x) cor(x$ses, x$mathach_z, use = "complete.obs"))
```

```
## $NonWhiteFemaleHSB
## [1] 0.32
## 
## $NonWhiteMaleHSB
## [1] 0.26
## 
## $WhiteFemaleHSB
## [1] 0.34
## 
## $WhiteMaleHSB
## [1] 0.28
```

----
## Summary on lapply/sapply
Major benefits over for loops include:
* No need to initialize objects
* Names from the list are maintained
* Overall, can substantially reduce the amount of code you may need to write,
  and can therefore also make your code more clear.

----
## The multivariate version

Consider the following


```r
list(rnorm(1, 1, 5), 
     rnorm(2, 2, 4), 
     rnorm(3, 3, 3), 
     rnorm(4, 4, 2), 
     rnorm(5, 5, 1))
```

```
## [[1]]
## [1] 1.7
## 
## [[2]]
## [1] 5.1 6.0
## 
## [[3]]
## [1] -0.043  5.796  4.318
## 
## [[4]]
## [1] 3.2 2.9 2.2 3.7
## 
## [[5]]
## [1] 4.1 3.6 5.4 4.7 7.0
```

----
## Alternatively: mapply


```r
mapply(rnorm, 1:5, 1:5, 5:1)
```

```
## [[1]]
## [1] 4.5
## 
## [[2]]
## [1] -0.027 11.988
## 
## [[3]]
## [1]  8.53 -0.16  1.96
## 
## [[4]]
## [1] 4.0 4.2 7.1 6.8
## 
## [[5]]
## [1] 6.3 5.6 6.0 4.3 4.8
```

----
## One more example

Usually better ways, but why might we want to do something like this?


```r
v <- c(3, 7, 4, 2)
l <- mapply(rep, NA, v)
l
```

```
## [[1]]
## [1] NA NA NA
## 
## [[2]]
## [1] NA NA NA NA NA NA NA
## 
## [[3]]
## [1] NA NA NA NA
## 
## [[4]]
## [1] NA NA
```

----
## Guided Practice
Let's return to the *gifted* data, which should be stored in an object *d*.
  The following code will produce a data frame (table) with the minimum, maximum, mean, median, and standard deviation for the first variable in the dataset *d*. Use `sapply()` to produce a table with the summary information reported for all variables in the *gifted* dataset. Try making it a bit prettier by providing dimension names (columns and rows).


```r
cbind(
    min(d[ ,1], na.rm = TRUE),
    max(d[ ,1], na.rm = TRUE),
    mean(d[ ,1], na.rm = TRUE),
    median(d[ ,1], na.rm = TRUE),
    sd(d[ ,1], na.rm = TRUE)
  )
```

---- &twocol
## One method

*** =left


```r
smry <- sapply(1:ncol(d), function(i) {
  cbind(
    min(d[ ,i], na.rm = TRUE),
    max(d[ ,i], na.rm = TRUE),
    mean(d[ ,i], na.rm = TRUE),
    median(d[ ,i], na.rm = TRUE),
    sd(d[ ,i], na.rm = TRUE)
  )
})

# Make it prettier
dimnames(smry) <- list(
    c("Min", "Max", "Mean", "Median", "SD"), 
    names(d)
  )

t(round(smry, 1))
```

*** =right


```
##            Min   Max  Mean Median  SD
## score    150.0 169.0 159.1  159.0 4.6
## fatheriq 110.0 126.0 114.8  115.0 3.5
## motheriq 101.0 131.0 118.2  118.0 6.5
## speak     10.0  23.0  18.0   18.0 3.2
## count     21.0  39.0  30.7   31.0 4.3
## read       1.7   2.5   2.1    2.2 0.2
## edutv      0.8   3.0   2.0    2.0 0.6
## cartoons   1.8   4.5   3.1    3.0 0.6
## iqM      106.0 122.5 116.5  116.5 3.7
```

----
## Alternative (analogous) method


```r
smryVar <- function(i) {
  cbind(
    min(d[ ,i], na.rm = TRUE),
    max(d[ ,i], na.rm = TRUE),
    mean(d[ ,i], na.rm = TRUE),
    median(d[ ,i], na.rm = TRUE),
    sd(d[ ,i], na.rm = TRUE)
  )
}
sapply(1:ncol(d), smryVar)
```

```
##       [,1]  [,2]  [,3] [,4] [,5] [,6] [,7] [,8]  [,9]
## [1,] 150.0 110.0 101.0 10.0 21.0 1.70 0.75 1.75 106.0
## [2,] 169.0 126.0 131.0 23.0 39.0 2.50 3.00 4.50 122.5
## [3,] 159.1 114.8 118.2 18.0 30.7 2.14 1.96 3.06 116.5
## [4,] 159.0 115.0 118.0 18.0 31.0 2.20 2.00 3.00 116.5
## [5,]   4.6   3.5   6.5  3.2  4.3 0.21 0.56 0.63   3.7
```

---- .segue
# Summaries by grouping variables

----
## Applying function by group

The `tapply()` function is useful for applying any generic function to each
  level of a grouping factor

![tapply](./assets/img/tapply.png)


----
## Load the beer data

```r
beer <- read.delim("./data/ratebeer_beerjobber.txt") # Load beer data
head(beer)
```

```
##                                  name                 brewer
## 1                     Abbey Monks Ale Abbey Beverage Company
## 2                  Abbey Monks Tripel Abbey Beverage Company
## 3                     Abbey Monks Wit Abbey Beverage Company
## 4 Alameda Barn Owl Imperial Brown Ale    Alameda Brewing Co.
## 5         Alameda Black Bear XX Stout    Alameda Brewing Co.
## 6       Alameda El Torero Organic IPA    Alameda Brewing Co.
##                     style abv ratings score.overall score.by.style
## 1             Belgian Ale 5.2      96            50             49
## 2            Abbey Tripel 8.0       3            NA             NA
## 3 Belgian White (Witbier) 5.1      46            23             19
## 4               Brown Ale 7.9      13            74             81
## 5           Foreign Stout 6.8     172            94             76
## 6    India Pale Ale (IPA) 7.2      56            74             43
```

----
## Mean overall score by brewer


```r
tapply(beer$score.overall, beer$brewer, mean, na.rm = TRUE)
```

```
##                         Abbey Beverage Company 
##                                             36 
##                            Alameda Brewing Co. 
##                                             83 
##                                 Ale Industries 
##                                             93 
##                       American Brewing Company 
##                                             76 
##               Appalachian Brewing Company (PA) 
##                                             57 
##                     Bent River Brewing Company 
##                                             54 
##                          Bison Brewing Company 
##                                             64 
##                          Blue Mountain Brewery 
##                                             82 
##                             Blue Point Brewing 
##                                             66 
##                         Boxcar Brewing Company 
##                                             23 
##             Brewers Alley Restaurant & Brewery 
##                                             58 
##                       Carolina Brewing Company 
##                                             62 
##                        Cavalry Brewing Company 
##                                             34 
##                             Colorado Cider Co. 
##                                             60 
##                      Crow Peak Brewing Company 
##                                             54 
##                Devils Backbone Brewing Company 
##                                             70 
##                      Devils Canyon Brewing Co. 
##                                             68 
##                           Diamond Knot Brewery 
##                                             69 
##                          Dicks Brewing Company 
##                                             74 
##                           Dry Dock Brewing Co. 
##                                             91 
##                         DuClaw Brewing Company 
##                                             81 
##                Eddyline Restaurant and Brewery 
##                                             42 
##                         Elevation Beer Company 
##                                             80 
##                            Elysian Brewing Co. 
##                                             86 
##                           Erie Brewing Company 
##                                             50 
##                       Evil Genius Beer Company 
##                                             39 
##                       Figure Eight Brewing LLC 
##                                             51 
##                              Flat 12 Bierwerks 
##                                             79 
##                           Fort Collins Brewery 
##                                             72 
##                       French Broad Brewing Co. 
##                                             76 
##                            Great River Brewery 
##                                             70 
##                                     Hales Ales 
##                                             72 
##                         Harlem Brewing Company 
##                                             20 
##                        Heretic Brewing Company 
##                                             87 
##                     High Noon Saloon & Brewery 
##                                             26 
##                       Highland Brewing Company 
##                                             76 
##                      Hilliards Brewing Company 
##                                             58 
##                         Hopworks Urban Brewery 
##                                             90 
##                        Huebert Brewing Company 
##                                            NaN 
##                      La Cumbre Brewing Company 
##                                            100 
##              Laurelwood Public House & Brewery 
##                                             85 
##                  Lazy Magnolia Brewing Company 
##                                             66 
##     Left Coast/Oggis Pizza and Brewing Company 
##                                             81 
##                              Mad River Brewery 
##                                             82 
##                  Madison River Brewing Company 
##                                             44 
##                                 Marble Brewery 
##                                             92 
##                     Millstream Brewing Company 
##                                             60 
##                                Mission Brewery 
##                                             72 
##                       Monocacy Brewing Company 
##                                            NaN 
##                    Mother Road Brewing Company 
##                                            NaN 
##                   Moylans Brewery & Restaurant 
##                                             84 
##                   Narragansett Brewing Company 
##                                             37 
##                           Odin Brewing Company 
##                                             70 
##                     Pale Horse Brewing Company 
##                                             66 
##                   Philadelphia Brewing Company 
##                                             56 
##                      Port City Brewing Company 
##                                             70 
##                            Rahr & Sons Brewing 
##                                             32 
##                                 Red Lodge Ales 
##                                             47 
##                       Renegade Brewing Company 
##                                             72 
## Rio Grande Brewing Co. (Sierra Blanca Brewing) 
##                                             24 
##                              Rivertown Brewing 
##                                             61 
##                       Santa Fe Brewing Company 
##                                             77 
##                       Sierra Blanca Brewing Co 
##                                             41 
##                             Six Rivers Brewery 
##                                             56 
##                                Straight To Ale 
##                                             91 
##                         Strike Brewing Company 
##                                            NaN 
##                      Telluride Brewing Company 
##                                            NaN 
##                          Terrapin Beer Company 
##                                             83 
##                    Thunderhead Brewing Company 
##                                             40 
##                           Twisted Pine Brewing 
##                                             43 
##                        Upslope Brewing Company 
##                                             49 
##                             Voodoo Brewing Co. 
##                                             76
```

----
## Number of beers rated by brewer


```r
tapply(beer$name, beer$brewer, length)
```

```
##                         Abbey Beverage Company 
##                                              3 
##                            Alameda Brewing Co. 
##                                              7 
##                                 Ale Industries 
##                                              3 
##                       American Brewing Company 
##                                              3 
##               Appalachian Brewing Company (PA) 
##                                             14 
##                     Bent River Brewing Company 
##                                              2 
##                          Bison Brewing Company 
##                                              6 
##                          Blue Mountain Brewery 
##                                              6 
##                             Blue Point Brewing 
##                                             13 
##                         Boxcar Brewing Company 
##                                              3 
##             Brewers Alley Restaurant & Brewery 
##                                              4 
##                       Carolina Brewing Company 
##                                              5 
##                        Cavalry Brewing Company 
##                                              5 
##                             Colorado Cider Co. 
##                                              4 
##                      Crow Peak Brewing Company 
##                                              3 
##                Devils Backbone Brewing Company 
##                                              2 
##                      Devils Canyon Brewing Co. 
##                                              4 
##                           Diamond Knot Brewery 
##                                              8 
##                          Dicks Brewing Company 
##                                             12 
##                           Dry Dock Brewing Co. 
##                                              3 
##                         DuClaw Brewing Company 
##                                              7 
##                Eddyline Restaurant and Brewery 
##                                              5 
##                         Elevation Beer Company 
##                                              1 
##                            Elysian Brewing Co. 
##                                             17 
##                           Erie Brewing Company 
##                                             10 
##                       Evil Genius Beer Company 
##                                              4 
##                       Figure Eight Brewing LLC 
##                                              6 
##                              Flat 12 Bierwerks 
##                                              7 
##                           Fort Collins Brewery 
##                                              7 
##                       French Broad Brewing Co. 
##                                              6 
##                            Great River Brewery 
##                                              4 
##                                     Hales Ales 
##                                              8 
##                         Harlem Brewing Company 
##                                              1 
##                        Heretic Brewing Company 
##                                              5 
##                     High Noon Saloon & Brewery 
##                                              3 
##                       Highland Brewing Company 
##                                              8 
##                      Hilliards Brewing Company 
##                                              3 
##                         Hopworks Urban Brewery 
##                                              5 
##                        Huebert Brewing Company 
##                                              4 
##                      La Cumbre Brewing Company 
##                                              1 
##              Laurelwood Public House & Brewery 
##                                              8 
##                  Lazy Magnolia Brewing Company 
##                                              5 
##     Left Coast/Oggis Pizza and Brewing Company 
##                                              7 
##                              Mad River Brewery 
##                                              6 
##                  Madison River Brewing Company 
##                                              4 
##                                 Marble Brewery 
##                                              4 
##                     Millstream Brewing Company 
##                                             10 
##                                Mission Brewery 
##                                              6 
##                       Monocacy Brewing Company 
##                                              1 
##                    Mother Road Brewing Company 
##                                              3 
##                   Moylans Brewery & Restaurant 
##                                             13 
##                   Narragansett Brewing Company 
##                                              7 
##                           Odin Brewing Company 
##                                              3 
##                     Pale Horse Brewing Company 
##                                              6 
##                   Philadelphia Brewing Company 
##                                             10 
##                      Port City Brewing Company 
##                                              5 
##                            Rahr & Sons Brewing 
##                                              4 
##                                 Red Lodge Ales 
##                                              6 
##                       Renegade Brewing Company 
##                                              1 
## Rio Grande Brewing Co. (Sierra Blanca Brewing) 
##                                              4 
##                              Rivertown Brewing 
##                                             17 
##                       Santa Fe Brewing Company 
##                                              9 
##                       Sierra Blanca Brewing Co 
##                                              5 
##                             Six Rivers Brewery 
##                                              5 
##                                Straight To Ale 
##                                              1 
##                         Strike Brewing Company 
##                                              5 
##                      Telluride Brewing Company 
##                                              1 
##                          Terrapin Beer Company 
##                                              4 
##                    Thunderhead Brewing Company 
##                                              2 
##                           Twisted Pine Brewing 
##                                              5 
##                        Upslope Brewing Company 
##                                              5 
##                             Voodoo Brewing Co. 
##                                              6
```

----
## Average overall score by abv 
#(rounded to nearest whole number)


```r
tapply(beer$score.overall, round(beer$abv), mean, na.rm = TRUE)
```

```
##  0  4  5  6  7  8  9 10 11 12 13 
## 52 44 55 66 76 80 88 85 96 88 97
```

----
## Make a summary by abv


```r
abv <- round(beer$abv)

summary <- data.frame(
  row.names = names(table(abv)),
  meanOverallScore = tapply(beer$score.overall, abv, mean, na.rm = TRUE),
  numberRatings = tapply(beer$ratings, abv, sum, na.rm = TRUE),
  numberBreweries = tapply(beer$brewer, abv, function(x) length(unique(x)))
  )
```

----

```r
summary
```

```
##    meanOverallScore numberRatings numberBreweries
## 0                52           531              18
## 4                44          3231              25
## 5                55         10061              44
## 6                66         13704              46
## 7                76          6575              39
## 8                80          5722              29
## 9                88          2362              13
## 10               85          2656              10
## 11               96            14               1
## 12               88           487               3
## 13               97            99               1
```

----
## An alternative to tapply for summation

Just as `rowSums` and `colSums` are optimized versions of `apply` for summation, `rowsum` is an optimized version of `tapply` for summation.

Compute the total number of ratings by brewer


```r
rowsum(beer$ratings, beer$brewer)
```

```
##                                                [,1]
## Abbey Beverage Company                          145
## Alameda Brewing Co.                             434
## Ale Industries                                   38
## American Brewing Company                        116
## Appalachian Brewing Company (PA)               1321
## Bent River Brewing Company                       92
## Bison Brewing Company                          1220
## Blue Mountain Brewery                           162
## Blue Point Brewing                             3198
## Boxcar Brewing Company                           56
## Brewers Alley Restaurant & Brewery              192
## Carolina Brewing Company                        284
## Cavalry Brewing Company                          58
## Colorado Cider Co.                               30
## Crow Peak Brewing Company                       178
## Devils Backbone Brewing Company                 150
## Devils Canyon Brewing Co.                       106
## Diamond Knot Brewery                           1027
## Dicks Brewing Company                           955
## Dry Dock Brewing Co.                            217
## DuClaw Brewing Company                          638
## Eddyline Restaurant and Brewery                  63
## Elevation Beer Company                           16
## Elysian Brewing Co.                            3361
## Erie Brewing Company                           1605
## Evil Genius Beer Company                         54
## Figure Eight Brewing LLC                         75
## Flat 12 Bierwerks                               189
## Fort Collins Brewery                           2527
## French Broad Brewing Co.                        765
## Great River Brewery                             238
## Hales Ales                                      946
## Harlem Brewing Company                           65
## Heretic Brewing Company                         388
## High Noon Saloon & Brewery                       53
## Highland Brewing Company                       2715
## Hilliards Brewing Company                        58
## Hopworks Urban Brewery                          611
## Huebert Brewing Company                          12
## La Cumbre Brewing Company                       112
## Laurelwood Public House & Brewery               446
## Lazy Magnolia Brewing Company                   962
## Left Coast/Oggis Pizza and Brewing Company      632
## Mad River Brewery                              2485
## Madison River Brewing Company                   210
## Marble Brewery                                  195
## Millstream Brewing Company                     1217
## Mission Brewery                                 886
## Monocacy Brewing Company                          6
## Mother Road Brewing Company                      17
## Moylans Brewery & Restaurant                   5148
## Narragansett Brewing Company                    514
## Odin Brewing Company                             91
## Pale Horse Brewing Company                       72
## Philadelphia Brewing Company                    762
## Port City Brewing Company                       299
## Rahr & Sons Brewing                             570
## Red Lodge Ales                                  140
## Renegade Brewing Company                         25
## Rio Grande Brewing Co. (Sierra Blanca Brewing)  205
## Rivertown Brewing                               718
## Santa Fe Brewing Company                       1229
## Sierra Blanca Brewing Co                        286
## Six Rivers Brewery                              252
## Straight To Ale                                  41
## Strike Brewing Company                           14
## Telluride Brewing Company                         8
## Terrapin Beer Company                          1678
## Thunderhead Brewing Company                      55
## Twisted Pine Brewing                            764
## Upslope Brewing Company                         220
## Voodoo Brewing Co.                              825
```

----
## Calculate average overall score for each brewer


```r
tot <- rowsum(beer$score.overall, beer$brewer)
n <- tapply(beer$score.overall, beer$brewer, length)
av <- tot[ ,1]/n # Note tot is an integer matrix
as.matrix(av)
```

```
##                                                [,1]
## Abbey Beverage Company                           NA
## Alameda Brewing Co.                              NA
## Ale Industries                                   NA
## American Brewing Company                         76
## Appalachian Brewing Company (PA)                 57
## Bent River Brewing Company                       54
## Bison Brewing Company                            64
## Blue Mountain Brewery                            82
## Blue Point Brewing                               66
## Boxcar Brewing Company                           23
## Brewers Alley Restaurant & Brewery               58
## Carolina Brewing Company                         62
## Cavalry Brewing Company                          NA
## Colorado Cider Co.                               NA
## Crow Peak Brewing Company                        54
## Devils Backbone Brewing Company                  70
## Devils Canyon Brewing Co.                        68
## Diamond Knot Brewery                             69
## Dicks Brewing Company                            74
## Dry Dock Brewing Co.                             91
## DuClaw Brewing Company                           81
## Eddyline Restaurant and Brewery                  NA
## Elevation Beer Company                           80
## Elysian Brewing Co.                              86
## Erie Brewing Company                             50
## Evil Genius Beer Company                         NA
## Figure Eight Brewing LLC                         NA
## Flat 12 Bierwerks                                NA
## Fort Collins Brewery                             72
## French Broad Brewing Co.                         76
## Great River Brewery                              70
## Hales Ales                                       72
## Harlem Brewing Company                           20
## Heretic Brewing Company                          87
## High Noon Saloon & Brewery                       26
## Highland Brewing Company                         76
## Hilliards Brewing Company                        58
## Hopworks Urban Brewery                           90
## Huebert Brewing Company                          NA
## La Cumbre Brewing Company                       100
## Laurelwood Public House & Brewery                85
## Lazy Magnolia Brewing Company                    66
## Left Coast/Oggis Pizza and Brewing Company       81
## Mad River Brewery                                82
## Madison River Brewing Company                    44
## Marble Brewery                                   92
## Millstream Brewing Company                       60
## Mission Brewery                                  72
## Monocacy Brewing Company                         NA
## Mother Road Brewing Company                      NA
## Moylans Brewery & Restaurant                     NA
## Narragansett Brewing Company                     37
## Odin Brewing Company                             70
## Pale Horse Brewing Company                       NA
## Philadelphia Brewing Company                     56
## Port City Brewing Company                        70
## Rahr & Sons Brewing                              32
## Red Lodge Ales                                   47
## Renegade Brewing Company                         72
## Rio Grande Brewing Co. (Sierra Blanca Brewing)   24
## Rivertown Brewing                                61
## Santa Fe Brewing Company                         77
## Sierra Blanca Brewing Co                         41
## Six Rivers Brewery                               56
## Straight To Ale                                  91
## Strike Brewing Company                           NA
## Telluride Brewing Company                        NA
## Terrapin Beer Company                            83
## Thunderhead Brewing Company                      40
## Twisted Pine Brewing                             43
## Upslope Brewing Company                          49
## Voodoo Brewing Co.                               76
```

----
## The `by()` function

Apply a function to groups.


```r
library(openintro) # Lots of nice datasets (which I just discovered)
data(census)
head(census)
```

```
##   censusYear stateFIPScode totalFamilyIncome age    sex     raceGeneral
## 1       2000       Florida             14550  44   Male Two major races
## 2       2000       Florida             22800  20 Female           White
## 3       2000       Florida                 0  20   Male           Black
## 4       2000       Florida             23000   6 Female           White
## 5       2000       Florida             48000  55   Male           White
## 6       2000       Florida             74000  43 Female           White
##            maritalStatus totalPersonalIncome
## 1 Married/spouse present                   0
## 2   Never married/single               13000
## 3   Never married/single               20000
## 4   Never married/single                  NA
## 5 Married/spouse present               36000
## 6 Married/spouse present               27000
```

----
## Calculate means by state, race, and sex


```r
means <- by(census$totalPersonalIncome, 
              list(census$stateFIPScode, 
                   census$raceGeneral,
                   census$sex), mean, na.rm = TRUE)
means # Note there's a lot of missing data
```

```
## : Alabama
## : American Indian or Alaska Native
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Arizona
## : American Indian or Alaska Native
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Arkansas
## : American Indian or Alaska Native
## : Female
## [1] NA
## -------------------------------------------------------- 
## : California
## : American Indian or Alaska Native
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Colorado
## : American Indian or Alaska Native
## : Female
## [1] 26700
## -------------------------------------------------------- 
## : Connecticut
## : American Indian or Alaska Native
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Delaware
## : American Indian or Alaska Native
## : Female
## [1] NA
## -------------------------------------------------------- 
## : District of Columbia
## : American Indian or Alaska Native
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Florida
## : American Indian or Alaska Native
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Georgia
## : American Indian or Alaska Native
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Hawaii
## : American Indian or Alaska Native
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Idaho
## : American Indian or Alaska Native
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Illinois
## : American Indian or Alaska Native
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Indiana
## : American Indian or Alaska Native
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Iowa
## : American Indian or Alaska Native
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Kansas
## : American Indian or Alaska Native
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Kentucky
## : American Indian or Alaska Native
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Louisiana
## : American Indian or Alaska Native
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Maine
## : American Indian or Alaska Native
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Maryland
## : American Indian or Alaska Native
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Massachusetts
## : American Indian or Alaska Native
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Michigan
## : American Indian or Alaska Native
## : Female
## [1] 20000
## -------------------------------------------------------- 
## : Minnesota
## : American Indian or Alaska Native
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Mississippi
## : American Indian or Alaska Native
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Missouri
## : American Indian or Alaska Native
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Montana
## : American Indian or Alaska Native
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Nebraska
## : American Indian or Alaska Native
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Nevada
## : American Indian or Alaska Native
## : Female
## [1] NA
## -------------------------------------------------------- 
## : New Hampshire
## : American Indian or Alaska Native
## : Female
## [1] NA
## -------------------------------------------------------- 
## : New Jersey
## : American Indian or Alaska Native
## : Female
## [1] NA
## -------------------------------------------------------- 
## : New Mexico
## : American Indian or Alaska Native
## : Female
## [1] NA
## -------------------------------------------------------- 
## : New York
## : American Indian or Alaska Native
## : Female
## [1] NA
## -------------------------------------------------------- 
## : North Carolina
## : American Indian or Alaska Native
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Ohio
## : American Indian or Alaska Native
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Oklahoma
## : American Indian or Alaska Native
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Oregon
## : American Indian or Alaska Native
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Pennsylvania
## : American Indian or Alaska Native
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Rhode Island
## : American Indian or Alaska Native
## : Female
## [1] NA
## -------------------------------------------------------- 
## : South Carolina
## : American Indian or Alaska Native
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Tennessee
## : American Indian or Alaska Native
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Texas
## : American Indian or Alaska Native
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Utah
## : American Indian or Alaska Native
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Virginia
## : American Indian or Alaska Native
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Washington
## : American Indian or Alaska Native
## : Female
## [1] NA
## -------------------------------------------------------- 
## : West Virginia
## : American Indian or Alaska Native
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Wisconsin
## : American Indian or Alaska Native
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Wyoming
## : American Indian or Alaska Native
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Alabama
## : Black
## : Female
## [1] 7100
## -------------------------------------------------------- 
## : Arizona
## : Black
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Arkansas
## : Black
## : Female
## [1] NaN
## -------------------------------------------------------- 
## : California
## : Black
## : Female
## [1] 40000
## -------------------------------------------------------- 
## : Colorado
## : Black
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Connecticut
## : Black
## : Female
## [1] 3600
## -------------------------------------------------------- 
## : Delaware
## : Black
## : Female
## [1] NA
## -------------------------------------------------------- 
## : District of Columbia
## : Black
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Florida
## : Black
## : Female
## [1] 40000
## -------------------------------------------------------- 
## : Georgia
## : Black
## : Female
## [1] 19067
## -------------------------------------------------------- 
## : Hawaii
## : Black
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Idaho
## : Black
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Illinois
## : Black
## : Female
## [1] 30000
## -------------------------------------------------------- 
## : Indiana
## : Black
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Iowa
## : Black
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Kansas
## : Black
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Kentucky
## : Black
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Louisiana
## : Black
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Maine
## : Black
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Maryland
## : Black
## : Female
## [1] 9500
## -------------------------------------------------------- 
## : Massachusetts
## : Black
## : Female
## [1] NaN
## -------------------------------------------------------- 
## : Michigan
## : Black
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Minnesota
## : Black
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Mississippi
## : Black
## : Female
## [1] 700
## -------------------------------------------------------- 
## : Missouri
## : Black
## : Female
## [1] 54000
## -------------------------------------------------------- 
## : Montana
## : Black
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Nebraska
## : Black
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Nevada
## : Black
## : Female
## [1] NA
## -------------------------------------------------------- 
## : New Hampshire
## : Black
## : Female
## [1] NA
## -------------------------------------------------------- 
## : New Jersey
## : Black
## : Female
## [1] 18500
## -------------------------------------------------------- 
## : New Mexico
## : Black
## : Female
## [1] NA
## -------------------------------------------------------- 
## : New York
## : Black
## : Female
## [1] 9025
## -------------------------------------------------------- 
## : North Carolina
## : Black
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Ohio
## : Black
## : Female
## [1] 19604
## -------------------------------------------------------- 
## : Oklahoma
## : Black
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Oregon
## : Black
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Pennsylvania
## : Black
## : Female
## [1] 27000
## -------------------------------------------------------- 
## : Rhode Island
## : Black
## : Female
## [1] NA
## -------------------------------------------------------- 
## : South Carolina
## : Black
## : Female
## [1] 15000
## -------------------------------------------------------- 
## : Tennessee
## : Black
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Texas
## : Black
## : Female
## [1] 10000
## -------------------------------------------------------- 
## : Utah
## : Black
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Virginia
## : Black
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Washington
## : Black
## : Female
## [1] NA
## -------------------------------------------------------- 
## : West Virginia
## : Black
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Wisconsin
## : Black
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Wyoming
## : Black
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Alabama
## : Chinese
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Arizona
## : Chinese
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Arkansas
## : Chinese
## : Female
## [1] NA
## -------------------------------------------------------- 
## : California
## : Chinese
## : Female
## [1] 0
## -------------------------------------------------------- 
## : Colorado
## : Chinese
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Connecticut
## : Chinese
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Delaware
## : Chinese
## : Female
## [1] NA
## -------------------------------------------------------- 
## : District of Columbia
## : Chinese
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Florida
## : Chinese
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Georgia
## : Chinese
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Hawaii
## : Chinese
## : Female
## [1] 34600
## -------------------------------------------------------- 
## : Idaho
## : Chinese
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Illinois
## : Chinese
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Indiana
## : Chinese
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Iowa
## : Chinese
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Kansas
## : Chinese
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Kentucky
## : Chinese
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Louisiana
## : Chinese
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Maine
## : Chinese
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Maryland
## : Chinese
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Massachusetts
## : Chinese
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Michigan
## : Chinese
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Minnesota
## : Chinese
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Mississippi
## : Chinese
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Missouri
## : Chinese
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Montana
## : Chinese
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Nebraska
## : Chinese
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Nevada
## : Chinese
## : Female
## [1] NA
## -------------------------------------------------------- 
## : New Hampshire
## : Chinese
## : Female
## [1] NA
## -------------------------------------------------------- 
## : New Jersey
## : Chinese
## : Female
## [1] NA
## -------------------------------------------------------- 
## : New Mexico
## : Chinese
## : Female
## [1] NA
## -------------------------------------------------------- 
## : New York
## : Chinese
## : Female
## [1] 0
## -------------------------------------------------------- 
## : North Carolina
## : Chinese
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Ohio
## : Chinese
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Oklahoma
## : Chinese
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Oregon
## : Chinese
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Pennsylvania
## : Chinese
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Rhode Island
## : Chinese
## : Female
## [1] NA
## -------------------------------------------------------- 
## : South Carolina
## : Chinese
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Tennessee
## : Chinese
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Texas
## : Chinese
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Utah
## : Chinese
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Virginia
## : Chinese
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Washington
## : Chinese
## : Female
## [1] NA
## -------------------------------------------------------- 
## : West Virginia
## : Chinese
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Wisconsin
## : Chinese
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Wyoming
## : Chinese
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Alabama
## : Japanese
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Arizona
## : Japanese
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Arkansas
## : Japanese
## : Female
## [1] NA
## -------------------------------------------------------- 
## : California
## : Japanese
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Colorado
## : Japanese
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Connecticut
## : Japanese
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Delaware
## : Japanese
## : Female
## [1] NA
## -------------------------------------------------------- 
## : District of Columbia
## : Japanese
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Florida
## : Japanese
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Georgia
## : Japanese
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Hawaii
## : Japanese
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Idaho
## : Japanese
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Illinois
## : Japanese
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Indiana
## : Japanese
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Iowa
## : Japanese
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Kansas
## : Japanese
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Kentucky
## : Japanese
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Louisiana
## : Japanese
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Maine
## : Japanese
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Maryland
## : Japanese
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Massachusetts
## : Japanese
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Michigan
## : Japanese
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Minnesota
## : Japanese
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Mississippi
## : Japanese
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Missouri
## : Japanese
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Montana
## : Japanese
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Nebraska
## : Japanese
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Nevada
## : Japanese
## : Female
## [1] NA
## -------------------------------------------------------- 
## : New Hampshire
## : Japanese
## : Female
## [1] NA
## -------------------------------------------------------- 
## : New Jersey
## : Japanese
## : Female
## [1] NA
## -------------------------------------------------------- 
## : New Mexico
## : Japanese
## : Female
## [1] NA
## -------------------------------------------------------- 
## : New York
## : Japanese
## : Female
## [1] NA
## -------------------------------------------------------- 
## : North Carolina
## : Japanese
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Ohio
## : Japanese
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Oklahoma
## : Japanese
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Oregon
## : Japanese
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Pennsylvania
## : Japanese
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Rhode Island
## : Japanese
## : Female
## [1] NA
## -------------------------------------------------------- 
## : South Carolina
## : Japanese
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Tennessee
## : Japanese
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Texas
## : Japanese
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Utah
## : Japanese
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Virginia
## : Japanese
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Washington
## : Japanese
## : Female
## [1] NA
## -------------------------------------------------------- 
## : West Virginia
## : Japanese
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Wisconsin
## : Japanese
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Wyoming
## : Japanese
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Alabama
## : Other
## : Female
## [1] 15300
## -------------------------------------------------------- 
## : Arizona
## : Other
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Arkansas
## : Other
## : Female
## [1] NA
## -------------------------------------------------------- 
## : California
## : Other
## : Female
## [1] 1900
## -------------------------------------------------------- 
## : Colorado
## : Other
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Connecticut
## : Other
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Delaware
## : Other
## : Female
## [1] NA
## -------------------------------------------------------- 
## : District of Columbia
## : Other
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Florida
## : Other
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Georgia
## : Other
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Hawaii
## : Other
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Idaho
## : Other
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Illinois
## : Other
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Indiana
## : Other
## : Female
## [1] NaN
## -------------------------------------------------------- 
## : Iowa
## : Other
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Kansas
## : Other
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Kentucky
## : Other
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Louisiana
## : Other
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Maine
## : Other
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Maryland
## : Other
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Massachusetts
## : Other
## : Female
## [1] 0
## -------------------------------------------------------- 
## : Michigan
## : Other
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Minnesota
## : Other
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Mississippi
## : Other
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Missouri
## : Other
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Montana
## : Other
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Nebraska
## : Other
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Nevada
## : Other
## : Female
## [1] NA
## -------------------------------------------------------- 
## : New Hampshire
## : Other
## : Female
## [1] NA
## -------------------------------------------------------- 
## : New Jersey
## : Other
## : Female
## [1] NaN
## -------------------------------------------------------- 
## : New Mexico
## : Other
## : Female
## [1] NA
## -------------------------------------------------------- 
## : New York
## : Other
## : Female
## [1] NA
## -------------------------------------------------------- 
## : North Carolina
## : Other
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Ohio
## : Other
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Oklahoma
## : Other
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Oregon
## : Other
## : Female
## [1] NaN
## -------------------------------------------------------- 
## : Pennsylvania
## : Other
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Rhode Island
## : Other
## : Female
## [1] NA
## -------------------------------------------------------- 
## : South Carolina
## : Other
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Tennessee
## : Other
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Texas
## : Other
## : Female
## [1] 0
## -------------------------------------------------------- 
## : Utah
## : Other
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Virginia
## : Other
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Washington
## : Other
## : Female
## [1] NA
## -------------------------------------------------------- 
## : West Virginia
## : Other
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Wisconsin
## : Other
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Wyoming
## : Other
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Alabama
## : Other Asian or Pacific Islander
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Arizona
## : Other Asian or Pacific Islander
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Arkansas
## : Other Asian or Pacific Islander
## : Female
## [1] NA
## -------------------------------------------------------- 
## : California
## : Other Asian or Pacific Islander
## : Female
## [1] 21150
## -------------------------------------------------------- 
## : Colorado
## : Other Asian or Pacific Islander
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Connecticut
## : Other Asian or Pacific Islander
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Delaware
## : Other Asian or Pacific Islander
## : Female
## [1] NA
## -------------------------------------------------------- 
## : District of Columbia
## : Other Asian or Pacific Islander
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Florida
## : Other Asian or Pacific Islander
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Georgia
## : Other Asian or Pacific Islander
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Hawaii
## : Other Asian or Pacific Islander
## : Female
## [1] 22000
## -------------------------------------------------------- 
## : Idaho
## : Other Asian or Pacific Islander
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Illinois
## : Other Asian or Pacific Islander
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Indiana
## : Other Asian or Pacific Islander
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Iowa
## : Other Asian or Pacific Islander
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Kansas
## : Other Asian or Pacific Islander
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Kentucky
## : Other Asian or Pacific Islander
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Louisiana
## : Other Asian or Pacific Islander
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Maine
## : Other Asian or Pacific Islander
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Maryland
## : Other Asian or Pacific Islander
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Massachusetts
## : Other Asian or Pacific Islander
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Michigan
## : Other Asian or Pacific Islander
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Minnesota
## : Other Asian or Pacific Islander
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Mississippi
## : Other Asian or Pacific Islander
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Missouri
## : Other Asian or Pacific Islander
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Montana
## : Other Asian or Pacific Islander
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Nebraska
## : Other Asian or Pacific Islander
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Nevada
## : Other Asian or Pacific Islander
## : Female
## [1] NA
## -------------------------------------------------------- 
## : New Hampshire
## : Other Asian or Pacific Islander
## : Female
## [1] NA
## -------------------------------------------------------- 
## : New Jersey
## : Other Asian or Pacific Islander
## : Female
## [1] NA
## -------------------------------------------------------- 
## : New Mexico
## : Other Asian or Pacific Islander
## : Female
## [1] NA
## -------------------------------------------------------- 
## : New York
## : Other Asian or Pacific Islander
## : Female
## [1] 0
## -------------------------------------------------------- 
## : North Carolina
## : Other Asian or Pacific Islander
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Ohio
## : Other Asian or Pacific Islander
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Oklahoma
## : Other Asian or Pacific Islander
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Oregon
## : Other Asian or Pacific Islander
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Pennsylvania
## : Other Asian or Pacific Islander
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Rhode Island
## : Other Asian or Pacific Islander
## : Female
## [1] NA
## -------------------------------------------------------- 
## : South Carolina
## : Other Asian or Pacific Islander
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Tennessee
## : Other Asian or Pacific Islander
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Texas
## : Other Asian or Pacific Islander
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Utah
## : Other Asian or Pacific Islander
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Virginia
## : Other Asian or Pacific Islander
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Washington
## : Other Asian or Pacific Islander
## : Female
## [1] NaN
## -------------------------------------------------------- 
## : West Virginia
## : Other Asian or Pacific Islander
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Wisconsin
## : Other Asian or Pacific Islander
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Wyoming
## : Other Asian or Pacific Islander
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Alabama
## : Two major races
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Arizona
## : Two major races
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Arkansas
## : Two major races
## : Female
## [1] NA
## -------------------------------------------------------- 
## : California
## : Two major races
## : Female
## [1] 0
## -------------------------------------------------------- 
## : Colorado
## : Two major races
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Connecticut
## : Two major races
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Delaware
## : Two major races
## : Female
## [1] NA
## -------------------------------------------------------- 
## : District of Columbia
## : Two major races
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Florida
## : Two major races
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Georgia
## : Two major races
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Hawaii
## : Two major races
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Idaho
## : Two major races
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Illinois
## : Two major races
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Indiana
## : Two major races
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Iowa
## : Two major races
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Kansas
## : Two major races
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Kentucky
## : Two major races
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Louisiana
## : Two major races
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Maine
## : Two major races
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Maryland
## : Two major races
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Massachusetts
## : Two major races
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Michigan
## : Two major races
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Minnesota
## : Two major races
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Mississippi
## : Two major races
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Missouri
## : Two major races
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Montana
## : Two major races
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Nebraska
## : Two major races
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Nevada
## : Two major races
## : Female
## [1] NaN
## -------------------------------------------------------- 
## : New Hampshire
## : Two major races
## : Female
## [1] NA
## -------------------------------------------------------- 
## : New Jersey
## : Two major races
## : Female
## [1] NA
## -------------------------------------------------------- 
## : New Mexico
## : Two major races
## : Female
## [1] NA
## -------------------------------------------------------- 
## : New York
## : Two major races
## : Female
## [1] 25000
## -------------------------------------------------------- 
## : North Carolina
## : Two major races
## : Female
## [1] NaN
## -------------------------------------------------------- 
## : Ohio
## : Two major races
## : Female
## [1] 0
## -------------------------------------------------------- 
## : Oklahoma
## : Two major races
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Oregon
## : Two major races
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Pennsylvania
## : Two major races
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Rhode Island
## : Two major races
## : Female
## [1] NA
## -------------------------------------------------------- 
## : South Carolina
## : Two major races
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Tennessee
## : Two major races
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Texas
## : Two major races
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Utah
## : Two major races
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Virginia
## : Two major races
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Washington
## : Two major races
## : Female
## [1] NA
## -------------------------------------------------------- 
## : West Virginia
## : Two major races
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Wisconsin
## : Two major races
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Wyoming
## : Two major races
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Alabama
## : White
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Arizona
## : White
## : Female
## [1] 20000
## -------------------------------------------------------- 
## : Arkansas
## : White
## : Female
## [1] NA
## -------------------------------------------------------- 
## : California
## : White
## : Female
## [1] 17994
## -------------------------------------------------------- 
## : Colorado
## : White
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Connecticut
## : White
## : Female
## [1] 34300
## -------------------------------------------------------- 
## : Delaware
## : White
## : Female
## [1] 9100
## -------------------------------------------------------- 
## : District of Columbia
## : White
## : Female
## [1] 30000
## -------------------------------------------------------- 
## : Florida
## : White
## : Female
## [1] 17229
## -------------------------------------------------------- 
## : Georgia
## : White
## : Female
## [1] 28410
## -------------------------------------------------------- 
## : Hawaii
## : White
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Idaho
## : White
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Illinois
## : White
## : Female
## [1] 15782
## -------------------------------------------------------- 
## : Indiana
## : White
## : Female
## [1] 19390
## -------------------------------------------------------- 
## : Iowa
## : White
## : Female
## [1] 14300
## -------------------------------------------------------- 
## : Kansas
## : White
## : Female
## [1] 484
## -------------------------------------------------------- 
## : Kentucky
## : White
## : Female
## [1] 13600
## -------------------------------------------------------- 
## : Louisiana
## : White
## : Female
## [1] 16050
## -------------------------------------------------------- 
## : Maine
## : White
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Maryland
## : White
## : Female
## [1] 36850
## -------------------------------------------------------- 
## : Massachusetts
## : White
## : Female
## [1] 35043
## -------------------------------------------------------- 
## : Michigan
## : White
## : Female
## [1] 240
## -------------------------------------------------------- 
## : Minnesota
## : White
## : Female
## [1] 24550
## -------------------------------------------------------- 
## : Mississippi
## : White
## : Female
## [1] 25000
## -------------------------------------------------------- 
## : Missouri
## : White
## : Female
## [1] 7800
## -------------------------------------------------------- 
## : Montana
## : White
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Nebraska
## : White
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Nevada
## : White
## : Female
## [1] NaN
## -------------------------------------------------------- 
## : New Hampshire
## : White
## : Female
## [1] NaN
## -------------------------------------------------------- 
## : New Jersey
## : White
## : Female
## [1] 15052
## -------------------------------------------------------- 
## : New Mexico
## : White
## : Female
## [1] NaN
## -------------------------------------------------------- 
## : New York
## : White
## : Female
## [1] 29826
## -------------------------------------------------------- 
## : North Carolina
## : White
## : Female
## [1] 8200
## -------------------------------------------------------- 
## : Ohio
## : White
## : Female
## [1] 17914
## -------------------------------------------------------- 
## : Oklahoma
## : White
## : Female
## [1] 27100
## -------------------------------------------------------- 
## : Oregon
## : White
## : Female
## [1] NaN
## -------------------------------------------------------- 
## : Pennsylvania
## : White
## : Female
## [1] 10850
## -------------------------------------------------------- 
## : Rhode Island
## : White
## : Female
## [1] 44004
## -------------------------------------------------------- 
## : South Carolina
## : White
## : Female
## [1] 23000
## -------------------------------------------------------- 
## : Tennessee
## : White
## : Female
## [1] 12200
## -------------------------------------------------------- 
## : Texas
## : White
## : Female
## [1] 10640
## -------------------------------------------------------- 
## : Utah
## : White
## : Female
## [1] 15000
## -------------------------------------------------------- 
## : Virginia
## : White
## : Female
## [1] 8500
## -------------------------------------------------------- 
## : Washington
## : White
## : Female
## [1] 8300
## -------------------------------------------------------- 
## : West Virginia
## : White
## : Female
## [1] NA
## -------------------------------------------------------- 
## : Wisconsin
## : White
## : Female
## [1] 20000
## -------------------------------------------------------- 
## : Wyoming
## : White
## : Female
## [1] NaN
## -------------------------------------------------------- 
## : Alabama
## : American Indian or Alaska Native
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Arizona
## : American Indian or Alaska Native
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Arkansas
## : American Indian or Alaska Native
## : Male
## [1] NA
## -------------------------------------------------------- 
## : California
## : American Indian or Alaska Native
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Colorado
## : American Indian or Alaska Native
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Connecticut
## : American Indian or Alaska Native
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Delaware
## : American Indian or Alaska Native
## : Male
## [1] NA
## -------------------------------------------------------- 
## : District of Columbia
## : American Indian or Alaska Native
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Florida
## : American Indian or Alaska Native
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Georgia
## : American Indian or Alaska Native
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Hawaii
## : American Indian or Alaska Native
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Idaho
## : American Indian or Alaska Native
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Illinois
## : American Indian or Alaska Native
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Indiana
## : American Indian or Alaska Native
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Iowa
## : American Indian or Alaska Native
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Kansas
## : American Indian or Alaska Native
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Kentucky
## : American Indian or Alaska Native
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Louisiana
## : American Indian or Alaska Native
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Maine
## : American Indian or Alaska Native
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Maryland
## : American Indian or Alaska Native
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Massachusetts
## : American Indian or Alaska Native
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Michigan
## : American Indian or Alaska Native
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Minnesota
## : American Indian or Alaska Native
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Mississippi
## : American Indian or Alaska Native
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Missouri
## : American Indian or Alaska Native
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Montana
## : American Indian or Alaska Native
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Nebraska
## : American Indian or Alaska Native
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Nevada
## : American Indian or Alaska Native
## : Male
## [1] NA
## -------------------------------------------------------- 
## : New Hampshire
## : American Indian or Alaska Native
## : Male
## [1] NA
## -------------------------------------------------------- 
## : New Jersey
## : American Indian or Alaska Native
## : Male
## [1] NA
## -------------------------------------------------------- 
## : New Mexico
## : American Indian or Alaska Native
## : Male
## [1] NA
## -------------------------------------------------------- 
## : New York
## : American Indian or Alaska Native
## : Male
## [1] NA
## -------------------------------------------------------- 
## : North Carolina
## : American Indian or Alaska Native
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Ohio
## : American Indian or Alaska Native
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Oklahoma
## : American Indian or Alaska Native
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Oregon
## : American Indian or Alaska Native
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Pennsylvania
## : American Indian or Alaska Native
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Rhode Island
## : American Indian or Alaska Native
## : Male
## [1] NA
## -------------------------------------------------------- 
## : South Carolina
## : American Indian or Alaska Native
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Tennessee
## : American Indian or Alaska Native
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Texas
## : American Indian or Alaska Native
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Utah
## : American Indian or Alaska Native
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Virginia
## : American Indian or Alaska Native
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Washington
## : American Indian or Alaska Native
## : Male
## [1] 0
## -------------------------------------------------------- 
## : West Virginia
## : American Indian or Alaska Native
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Wisconsin
## : American Indian or Alaska Native
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Wyoming
## : American Indian or Alaska Native
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Alabama
## : Black
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Arizona
## : Black
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Arkansas
## : Black
## : Male
## [1] NA
## -------------------------------------------------------- 
## : California
## : Black
## : Male
## [1] 57190
## -------------------------------------------------------- 
## : Colorado
## : Black
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Connecticut
## : Black
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Delaware
## : Black
## : Male
## [1] NA
## -------------------------------------------------------- 
## : District of Columbia
## : Black
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Florida
## : Black
## : Male
## [1] 11067
## -------------------------------------------------------- 
## : Georgia
## : Black
## : Male
## [1] 25025
## -------------------------------------------------------- 
## : Hawaii
## : Black
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Idaho
## : Black
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Illinois
## : Black
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Indiana
## : Black
## : Male
## [1] 4000
## -------------------------------------------------------- 
## : Iowa
## : Black
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Kansas
## : Black
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Kentucky
## : Black
## : Male
## [1] 51900
## -------------------------------------------------------- 
## : Louisiana
## : Black
## : Male
## [1] 6350
## -------------------------------------------------------- 
## : Maine
## : Black
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Maryland
## : Black
## : Male
## [1] 10400
## -------------------------------------------------------- 
## : Massachusetts
## : Black
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Michigan
## : Black
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Minnesota
## : Black
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Mississippi
## : Black
## : Male
## [1] NaN
## -------------------------------------------------------- 
## : Missouri
## : Black
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Montana
## : Black
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Nebraska
## : Black
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Nevada
## : Black
## : Male
## [1] NA
## -------------------------------------------------------- 
## : New Hampshire
## : Black
## : Male
## [1] NA
## -------------------------------------------------------- 
## : New Jersey
## : Black
## : Male
## [1] 36000
## -------------------------------------------------------- 
## : New Mexico
## : Black
## : Male
## [1] NA
## -------------------------------------------------------- 
## : New York
## : Black
## : Male
## [1] 3180
## -------------------------------------------------------- 
## : North Carolina
## : Black
## : Male
## [1] 14000
## -------------------------------------------------------- 
## : Ohio
## : Black
## : Male
## [1] NaN
## -------------------------------------------------------- 
## : Oklahoma
## : Black
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Oregon
## : Black
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Pennsylvania
## : Black
## : Male
## [1] 6500
## -------------------------------------------------------- 
## : Rhode Island
## : Black
## : Male
## [1] NA
## -------------------------------------------------------- 
## : South Carolina
## : Black
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Tennessee
## : Black
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Texas
## : Black
## : Male
## [1] 8797
## -------------------------------------------------------- 
## : Utah
## : Black
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Virginia
## : Black
## : Male
## [1] 31800
## -------------------------------------------------------- 
## : Washington
## : Black
## : Male
## [1] NA
## -------------------------------------------------------- 
## : West Virginia
## : Black
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Wisconsin
## : Black
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Wyoming
## : Black
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Alabama
## : Chinese
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Arizona
## : Chinese
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Arkansas
## : Chinese
## : Male
## [1] NA
## -------------------------------------------------------- 
## : California
## : Chinese
## : Male
## [1] 20000
## -------------------------------------------------------- 
## : Colorado
## : Chinese
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Connecticut
## : Chinese
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Delaware
## : Chinese
## : Male
## [1] NA
## -------------------------------------------------------- 
## : District of Columbia
## : Chinese
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Florida
## : Chinese
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Georgia
## : Chinese
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Hawaii
## : Chinese
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Idaho
## : Chinese
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Illinois
## : Chinese
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Indiana
## : Chinese
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Iowa
## : Chinese
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Kansas
## : Chinese
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Kentucky
## : Chinese
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Louisiana
## : Chinese
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Maine
## : Chinese
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Maryland
## : Chinese
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Massachusetts
## : Chinese
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Michigan
## : Chinese
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Minnesota
## : Chinese
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Mississippi
## : Chinese
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Missouri
## : Chinese
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Montana
## : Chinese
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Nebraska
## : Chinese
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Nevada
## : Chinese
## : Male
## [1] NA
## -------------------------------------------------------- 
## : New Hampshire
## : Chinese
## : Male
## [1] NA
## -------------------------------------------------------- 
## : New Jersey
## : Chinese
## : Male
## [1] NA
## -------------------------------------------------------- 
## : New Mexico
## : Chinese
## : Male
## [1] NA
## -------------------------------------------------------- 
## : New York
## : Chinese
## : Male
## [1] NA
## -------------------------------------------------------- 
## : North Carolina
## : Chinese
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Ohio
## : Chinese
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Oklahoma
## : Chinese
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Oregon
## : Chinese
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Pennsylvania
## : Chinese
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Rhode Island
## : Chinese
## : Male
## [1] NA
## -------------------------------------------------------- 
## : South Carolina
## : Chinese
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Tennessee
## : Chinese
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Texas
## : Chinese
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Utah
## : Chinese
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Virginia
## : Chinese
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Washington
## : Chinese
## : Male
## [1] NA
## -------------------------------------------------------- 
## : West Virginia
## : Chinese
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Wisconsin
## : Chinese
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Wyoming
## : Chinese
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Alabama
## : Japanese
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Arizona
## : Japanese
## : Male
## [1] 45000
## -------------------------------------------------------- 
## : Arkansas
## : Japanese
## : Male
## [1] NA
## -------------------------------------------------------- 
## : California
## : Japanese
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Colorado
## : Japanese
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Connecticut
## : Japanese
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Delaware
## : Japanese
## : Male
## [1] NA
## -------------------------------------------------------- 
## : District of Columbia
## : Japanese
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Florida
## : Japanese
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Georgia
## : Japanese
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Hawaii
## : Japanese
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Idaho
## : Japanese
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Illinois
## : Japanese
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Indiana
## : Japanese
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Iowa
## : Japanese
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Kansas
## : Japanese
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Kentucky
## : Japanese
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Louisiana
## : Japanese
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Maine
## : Japanese
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Maryland
## : Japanese
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Massachusetts
## : Japanese
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Michigan
## : Japanese
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Minnesota
## : Japanese
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Mississippi
## : Japanese
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Missouri
## : Japanese
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Montana
## : Japanese
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Nebraska
## : Japanese
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Nevada
## : Japanese
## : Male
## [1] NA
## -------------------------------------------------------- 
## : New Hampshire
## : Japanese
## : Male
## [1] NA
## -------------------------------------------------------- 
## : New Jersey
## : Japanese
## : Male
## [1] NA
## -------------------------------------------------------- 
## : New Mexico
## : Japanese
## : Male
## [1] NA
## -------------------------------------------------------- 
## : New York
## : Japanese
## : Male
## [1] NA
## -------------------------------------------------------- 
## : North Carolina
## : Japanese
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Ohio
## : Japanese
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Oklahoma
## : Japanese
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Oregon
## : Japanese
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Pennsylvania
## : Japanese
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Rhode Island
## : Japanese
## : Male
## [1] NA
## -------------------------------------------------------- 
## : South Carolina
## : Japanese
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Tennessee
## : Japanese
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Texas
## : Japanese
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Utah
## : Japanese
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Virginia
## : Japanese
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Washington
## : Japanese
## : Male
## [1] NA
## -------------------------------------------------------- 
## : West Virginia
## : Japanese
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Wisconsin
## : Japanese
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Wyoming
## : Japanese
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Alabama
## : Other
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Arizona
## : Other
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Arkansas
## : Other
## : Male
## [1] NA
## -------------------------------------------------------- 
## : California
## : Other
## : Male
## [1] 10900
## -------------------------------------------------------- 
## : Colorado
## : Other
## : Male
## [1] 13000
## -------------------------------------------------------- 
## : Connecticut
## : Other
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Delaware
## : Other
## : Male
## [1] NA
## -------------------------------------------------------- 
## : District of Columbia
## : Other
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Florida
## : Other
## : Male
## [1] 24250
## -------------------------------------------------------- 
## : Georgia
## : Other
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Hawaii
## : Other
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Idaho
## : Other
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Illinois
## : Other
## : Male
## [1] 40600
## -------------------------------------------------------- 
## : Indiana
## : Other
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Iowa
## : Other
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Kansas
## : Other
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Kentucky
## : Other
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Louisiana
## : Other
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Maine
## : Other
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Maryland
## : Other
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Massachusetts
## : Other
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Michigan
## : Other
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Minnesota
## : Other
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Mississippi
## : Other
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Missouri
## : Other
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Montana
## : Other
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Nebraska
## : Other
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Nevada
## : Other
## : Male
## [1] NA
## -------------------------------------------------------- 
## : New Hampshire
## : Other
## : Male
## [1] NA
## -------------------------------------------------------- 
## : New Jersey
## : Other
## : Male
## [1] NA
## -------------------------------------------------------- 
## : New Mexico
## : Other
## : Male
## [1] 10600
## -------------------------------------------------------- 
## : New York
## : Other
## : Male
## [1] NA
## -------------------------------------------------------- 
## : North Carolina
## : Other
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Ohio
## : Other
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Oklahoma
## : Other
## : Male
## [1] NaN
## -------------------------------------------------------- 
## : Oregon
## : Other
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Pennsylvania
## : Other
## : Male
## [1] 0
## -------------------------------------------------------- 
## : Rhode Island
## : Other
## : Male
## [1] NA
## -------------------------------------------------------- 
## : South Carolina
## : Other
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Tennessee
## : Other
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Texas
## : Other
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Utah
## : Other
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Virginia
## : Other
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Washington
## : Other
## : Male
## [1] 16000
## -------------------------------------------------------- 
## : West Virginia
## : Other
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Wisconsin
## : Other
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Wyoming
## : Other
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Alabama
## : Other Asian or Pacific Islander
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Arizona
## : Other Asian or Pacific Islander
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Arkansas
## : Other Asian or Pacific Islander
## : Male
## [1] NA
## -------------------------------------------------------- 
## : California
## : Other Asian or Pacific Islander
## : Male
## [1] 95000
## -------------------------------------------------------- 
## : Colorado
## : Other Asian or Pacific Islander
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Connecticut
## : Other Asian or Pacific Islander
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Delaware
## : Other Asian or Pacific Islander
## : Male
## [1] NA
## -------------------------------------------------------- 
## : District of Columbia
## : Other Asian or Pacific Islander
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Florida
## : Other Asian or Pacific Islander
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Georgia
## : Other Asian or Pacific Islander
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Hawaii
## : Other Asian or Pacific Islander
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Idaho
## : Other Asian or Pacific Islander
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Illinois
## : Other Asian or Pacific Islander
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Indiana
## : Other Asian or Pacific Islander
## : Male
## [1] 39920
## -------------------------------------------------------- 
## : Iowa
## : Other Asian or Pacific Islander
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Kansas
## : Other Asian or Pacific Islander
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Kentucky
## : Other Asian or Pacific Islander
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Louisiana
## : Other Asian or Pacific Islander
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Maine
## : Other Asian or Pacific Islander
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Maryland
## : Other Asian or Pacific Islander
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Massachusetts
## : Other Asian or Pacific Islander
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Michigan
## : Other Asian or Pacific Islander
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Minnesota
## : Other Asian or Pacific Islander
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Mississippi
## : Other Asian or Pacific Islander
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Missouri
## : Other Asian or Pacific Islander
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Montana
## : Other Asian or Pacific Islander
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Nebraska
## : Other Asian or Pacific Islander
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Nevada
## : Other Asian or Pacific Islander
## : Male
## [1] 23000
## -------------------------------------------------------- 
## : New Hampshire
## : Other Asian or Pacific Islander
## : Male
## [1] NA
## -------------------------------------------------------- 
## : New Jersey
## : Other Asian or Pacific Islander
## : Male
## [1] 317000
## -------------------------------------------------------- 
## : New Mexico
## : Other Asian or Pacific Islander
## : Male
## [1] NA
## -------------------------------------------------------- 
## : New York
## : Other Asian or Pacific Islander
## : Male
## [1] NA
## -------------------------------------------------------- 
## : North Carolina
## : Other Asian or Pacific Islander
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Ohio
## : Other Asian or Pacific Islander
## : Male
## [1] 12000
## -------------------------------------------------------- 
## : Oklahoma
## : Other Asian or Pacific Islander
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Oregon
## : Other Asian or Pacific Islander
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Pennsylvania
## : Other Asian or Pacific Islander
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Rhode Island
## : Other Asian or Pacific Islander
## : Male
## [1] NA
## -------------------------------------------------------- 
## : South Carolina
## : Other Asian or Pacific Islander
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Tennessee
## : Other Asian or Pacific Islander
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Texas
## : Other Asian or Pacific Islander
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Utah
## : Other Asian or Pacific Islander
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Virginia
## : Other Asian or Pacific Islander
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Washington
## : Other Asian or Pacific Islander
## : Male
## [1] 15000
## -------------------------------------------------------- 
## : West Virginia
## : Other Asian or Pacific Islander
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Wisconsin
## : Other Asian or Pacific Islander
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Wyoming
## : Other Asian or Pacific Islander
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Alabama
## : Two major races
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Arizona
## : Two major races
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Arkansas
## : Two major races
## : Male
## [1] NA
## -------------------------------------------------------- 
## : California
## : Two major races
## : Male
## [1] NaN
## -------------------------------------------------------- 
## : Colorado
## : Two major races
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Connecticut
## : Two major races
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Delaware
## : Two major races
## : Male
## [1] NA
## -------------------------------------------------------- 
## : District of Columbia
## : Two major races
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Florida
## : Two major races
## : Male
## [1] 0
## -------------------------------------------------------- 
## : Georgia
## : Two major races
## : Male
## [1] 19700
## -------------------------------------------------------- 
## : Hawaii
## : Two major races
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Idaho
## : Two major races
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Illinois
## : Two major races
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Indiana
## : Two major races
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Iowa
## : Two major races
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Kansas
## : Two major races
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Kentucky
## : Two major races
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Louisiana
## : Two major races
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Maine
## : Two major races
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Maryland
## : Two major races
## : Male
## [1] 22460
## -------------------------------------------------------- 
## : Massachusetts
## : Two major races
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Michigan
## : Two major races
## : Male
## [1] 69000
## -------------------------------------------------------- 
## : Minnesota
## : Two major races
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Mississippi
## : Two major races
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Missouri
## : Two major races
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Montana
## : Two major races
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Nebraska
## : Two major races
## : Male
## [1] 40000
## -------------------------------------------------------- 
## : Nevada
## : Two major races
## : Male
## [1] NA
## -------------------------------------------------------- 
## : New Hampshire
## : Two major races
## : Male
## [1] NA
## -------------------------------------------------------- 
## : New Jersey
## : Two major races
## : Male
## [1] 24500
## -------------------------------------------------------- 
## : New Mexico
## : Two major races
## : Male
## [1] NA
## -------------------------------------------------------- 
## : New York
## : Two major races
## : Male
## [1] NaN
## -------------------------------------------------------- 
## : North Carolina
## : Two major races
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Ohio
## : Two major races
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Oklahoma
## : Two major races
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Oregon
## : Two major races
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Pennsylvania
## : Two major races
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Rhode Island
## : Two major races
## : Male
## [1] NA
## -------------------------------------------------------- 
## : South Carolina
## : Two major races
## : Male
## [1] NaN
## -------------------------------------------------------- 
## : Tennessee
## : Two major races
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Texas
## : Two major races
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Utah
## : Two major races
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Virginia
## : Two major races
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Washington
## : Two major races
## : Male
## [1] NA
## -------------------------------------------------------- 
## : West Virginia
## : Two major races
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Wisconsin
## : Two major races
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Wyoming
## : Two major races
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Alabama
## : White
## : Male
## [1] 47950
## -------------------------------------------------------- 
## : Arizona
## : White
## : Male
## [1] 14000
## -------------------------------------------------------- 
## : Arkansas
## : White
## : Male
## [1] NA
## -------------------------------------------------------- 
## : California
## : White
## : Male
## [1] 77400
## -------------------------------------------------------- 
## : Colorado
## : White
## : Male
## [1] 223050
## -------------------------------------------------------- 
## : Connecticut
## : White
## : Male
## [1] 25500
## -------------------------------------------------------- 
## : Delaware
## : White
## : Male
## [1] NA
## -------------------------------------------------------- 
## : District of Columbia
## : White
## : Male
## [1] 17190
## -------------------------------------------------------- 
## : Florida
## : White
## : Male
## [1] 29291
## -------------------------------------------------------- 
## : Georgia
## : White
## : Male
## [1] 60212
## -------------------------------------------------------- 
## : Hawaii
## : White
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Idaho
## : White
## : Male
## [1] 23000
## -------------------------------------------------------- 
## : Illinois
## : White
## : Male
## [1] 32940
## -------------------------------------------------------- 
## : Indiana
## : White
## : Male
## [1] 21250
## -------------------------------------------------------- 
## : Iowa
## : White
## : Male
## [1] 28500
## -------------------------------------------------------- 
## : Kansas
## : White
## : Male
## [1] 41000
## -------------------------------------------------------- 
## : Kentucky
## : White
## : Male
## [1] 240000
## -------------------------------------------------------- 
## : Louisiana
## : White
## : Male
## [1] 40575
## -------------------------------------------------------- 
## : Maine
## : White
## : Male
## [1] 10700
## -------------------------------------------------------- 
## : Maryland
## : White
## : Male
## [1] 46850
## -------------------------------------------------------- 
## : Massachusetts
## : White
## : Male
## [1] 24167
## -------------------------------------------------------- 
## : Michigan
## : White
## : Male
## [1] 49967
## -------------------------------------------------------- 
## : Minnesota
## : White
## : Male
## [1] 14333
## -------------------------------------------------------- 
## : Mississippi
## : White
## : Male
## [1] 25000
## -------------------------------------------------------- 
## : Missouri
## : White
## : Male
## [1] 14600
## -------------------------------------------------------- 
## : Montana
## : White
## : Male
## [1] 36000
## -------------------------------------------------------- 
## : Nebraska
## : White
## : Male
## [1] NA
## -------------------------------------------------------- 
## : Nevada
## : White
## : Male
## [1] NaN
## -------------------------------------------------------- 
## : New Hampshire
## : White
## : Male
## [1] 14700
## -------------------------------------------------------- 
## : New Jersey
## : White
## : Male
## [1] 11420
## -------------------------------------------------------- 
## : New Mexico
## : White
## : Male
## [1] 44000
## -------------------------------------------------------- 
## : New York
## : White
## : Male
## [1] 46487
## -------------------------------------------------------- 
## : North Carolina
## : White
## : Male
## [1] 21527
## -------------------------------------------------------- 
## : Ohio
## : White
## : Male
## [1] 33161
## -------------------------------------------------------- 
## : Oklahoma
## : White
## : Male
## [1] 43867
## -------------------------------------------------------- 
## : Oregon
## : White
## : Male
## [1] 12000
## -------------------------------------------------------- 
## : Pennsylvania
## : White
## : Male
## [1] 36202
## -------------------------------------------------------- 
## : Rhode Island
## : White
## : Male
## [1] 43000
## -------------------------------------------------------- 
## : South Carolina
## : White
## : Male
## [1] 26960
## -------------------------------------------------------- 
## : Tennessee
## : White
## : Male
## [1] 61675
## -------------------------------------------------------- 
## : Texas
## : White
## : Male
## [1] 57515
## -------------------------------------------------------- 
## : Utah
## : White
## : Male
## [1] 72600
## -------------------------------------------------------- 
## : Virginia
## : White
## : Male
## [1] 18900
## -------------------------------------------------------- 
## : Washington
## : White
## : Male
## [1] 26525
## -------------------------------------------------------- 
## : West Virginia
## : White
## : Male
## [1] 0
## -------------------------------------------------------- 
## : Wisconsin
## : White
## : Male
## [1] 36673
## -------------------------------------------------------- 
## : Wyoming
## : White
## : Male
## [1] NA
```

----
## Structure of means


```r
str(means)
```

```
##  by [1:47, 1:8, 1:2] NA NA NA NA 26700 NA NA NA NA NA ...
##  - attr(*, "dimnames")=List of 3
##   ..$ : chr [1:47] "Alabama" "Arizona" "Arkansas" "California" ...
##   ..$ : chr [1:8] "American Indian or Alaska Native" "Black" "Chinese" "Japanese" ...
##   ..$ : chr [1:2] "Female" "Male"
##  - attr(*, "call")= language by.default(data = census$totalPersonalIncome, INDICES = list(census$stateFIPScode,      census$raceGeneral, census$sex), FUN = mean, na.rm = TRUE)
```

----
## Compute marginal means by state


```r
apply(means, 1, mean, na.rm = TRUE)
```

```
##              Alabama              Arizona             Arkansas 
##                23450                26333                  NaN 
##           California             Colorado          Connecticut 
##                31049                87583                21133 
##             Delaware District of Columbia              Florida 
##                 9100                23595                20306 
##              Georgia               Hawaii                Idaho 
##                30483                28300                23000 
##             Illinois              Indiana                 Iowa 
##                29830                21140                21400 
##               Kansas             Kentucky            Louisiana 
##                20742               101833                20992 
##                Maine             Maryland        Massachusetts 
##                10700                25212                19737 
##             Michigan            Minnesota          Mississippi 
##                34802                19442                16900 
##             Missouri              Montana             Nebraska 
##                25467                36000                40000 
##               Nevada        New Hampshire           New Jersey 
##                23000                14700                70412 
##           New Mexico             New York       North Carolina 
##                27300                16217                14576 
##                 Ohio             Oklahoma               Oregon 
##                16536                35483                12000 
##         Pennsylvania         Rhode Island       South Carolina 
##                16110                43502                21653 
##            Tennessee                Texas                 Utah 
##                36938                17390                43800 
##             Virginia           Washington        West Virginia 
##                19733                13165                    0 
##            Wisconsin              Wyoming 
##                28336                  NaN
```

----
## Compute marginal means by race/ethnicity


```r
apply(means, 2, mean, na.rm = TRUE)
```

```
## American Indian or Alaska Native                            Black 
##                            15567                            20332 
##                          Chinese                         Japanese 
##                            13650                            45000 
##                            Other  Other Asian or Pacific Islander 
##                            12050                            60563 
##                  Two major races                            White 
##                            22296                            31992
```

----
## Compute marginal means by sex


```r
apply(means, 3, mean, na.rm = TRUE)
```

```
## Female   Male 
##  17245  37827
```

----
## Look within a particular state


```r
means["Oregon", , ]
```

```
##                                  Female  Male
## American Indian or Alaska Native     NA    NA
## Black                                NA    NA
## Chinese                              NA    NA
## Japanese                             NA    NA
## Other                               NaN    NA
## Other Asian or Pacific Islander      NA    NA
## Two major races                      NA    NA
## White                               NaN 12000
```

----
## Only individuals identifying as Black


```r
means[ ,"Black", ]
```

```
##                      Female  Male
## Alabama                7100    NA
## Arizona                  NA    NA
## Arkansas                NaN    NA
## California            40000 57190
## Colorado                 NA    NA
## Connecticut            3600    NA
## Delaware                 NA    NA
## District of Columbia     NA    NA
## Florida               40000 11067
## Georgia               19067 25025
## Hawaii                   NA    NA
## Idaho                    NA    NA
## Illinois              30000    NA
## Indiana                  NA  4000
## Iowa                     NA    NA
## Kansas                   NA    NA
## Kentucky                 NA 51900
## Louisiana                NA  6350
## Maine                    NA    NA
## Maryland               9500 10400
## Massachusetts           NaN    NA
## Michigan                 NA    NA
## Minnesota                NA    NA
## Mississippi             700   NaN
## Missouri              54000    NA
## Montana                  NA    NA
## Nebraska                 NA    NA
## Nevada                   NA    NA
## New Hampshire            NA    NA
## New Jersey            18500 36000
## New Mexico               NA    NA
## New York               9025  3180
## North Carolina           NA 14000
## Ohio                  19604   NaN
## Oklahoma                 NA    NA
## Oregon                   NA    NA
## Pennsylvania          27000  6500
## Rhode Island             NA    NA
## South Carolina        15000    NA
## Tennessee                NA    NA
## Texas                 10000  8797
## Utah                     NA    NA
## Virginia                 NA 31800
## Washington               NA    NA
## West Virginia            NA    NA
## Wisconsin                NA    NA
## Wyoming                  NA    NA
```

----
## Only Males


```r
means[ , ,"Male"]
```

```
##                      American Indian or Alaska Native Black Chinese
## Alabama                                            NA    NA      NA
## Arizona                                            NA    NA      NA
## Arkansas                                           NA    NA      NA
## California                                         NA 57190   20000
## Colorado                                           NA    NA      NA
## Connecticut                                        NA    NA      NA
## Delaware                                           NA    NA      NA
## District of Columbia                               NA    NA      NA
## Florida                                            NA 11067      NA
## Georgia                                            NA 25025      NA
## Hawaii                                             NA    NA      NA
## Idaho                                              NA    NA      NA
## Illinois                                           NA    NA      NA
## Indiana                                            NA  4000      NA
## Iowa                                               NA    NA      NA
## Kansas                                             NA    NA      NA
## Kentucky                                           NA 51900      NA
## Louisiana                                          NA  6350      NA
## Maine                                              NA    NA      NA
## Maryland                                           NA 10400      NA
## Massachusetts                                      NA    NA      NA
## Michigan                                           NA    NA      NA
## Minnesota                                          NA    NA      NA
## Mississippi                                        NA   NaN      NA
## Missouri                                           NA    NA      NA
## Montana                                            NA    NA      NA
## Nebraska                                           NA    NA      NA
## Nevada                                             NA    NA      NA
## New Hampshire                                      NA    NA      NA
## New Jersey                                         NA 36000      NA
## New Mexico                                         NA    NA      NA
## New York                                           NA  3180      NA
## North Carolina                                     NA 14000      NA
## Ohio                                               NA   NaN      NA
## Oklahoma                                           NA    NA      NA
## Oregon                                             NA    NA      NA
## Pennsylvania                                       NA  6500      NA
## Rhode Island                                       NA    NA      NA
## South Carolina                                     NA    NA      NA
## Tennessee                                          NA    NA      NA
## Texas                                              NA  8797      NA
## Utah                                               NA    NA      NA
## Virginia                                           NA 31800      NA
## Washington                                          0    NA      NA
## West Virginia                                      NA    NA      NA
## Wisconsin                                          NA    NA      NA
## Wyoming                                            NA    NA      NA
##                      Japanese Other Other Asian or Pacific Islander
## Alabama                    NA    NA                              NA
## Arizona                 45000    NA                              NA
## Arkansas                   NA    NA                              NA
## California                 NA 10900                           95000
## Colorado                   NA 13000                              NA
## Connecticut                NA    NA                              NA
## Delaware                   NA    NA                              NA
## District of Columbia       NA    NA                              NA
## Florida                    NA 24250                              NA
## Georgia                    NA    NA                              NA
## Hawaii                     NA    NA                              NA
## Idaho                      NA    NA                              NA
## Illinois                   NA 40600                              NA
## Indiana                    NA    NA                           39920
## Iowa                       NA    NA                              NA
## Kansas                     NA    NA                              NA
## Kentucky                   NA    NA                              NA
## Louisiana                  NA    NA                              NA
## Maine                      NA    NA                              NA
## Maryland                   NA    NA                              NA
## Massachusetts              NA    NA                              NA
## Michigan                   NA    NA                              NA
## Minnesota                  NA    NA                              NA
## Mississippi                NA    NA                              NA
## Missouri                   NA    NA                              NA
## Montana                    NA    NA                              NA
## Nebraska                   NA    NA                              NA
## Nevada                     NA    NA                           23000
## New Hampshire              NA    NA                              NA
## New Jersey                 NA    NA                          317000
## New Mexico                 NA 10600                              NA
## New York                   NA    NA                              NA
## North Carolina             NA    NA                              NA
## Ohio                       NA    NA                           12000
## Oklahoma                   NA   NaN                              NA
## Oregon                     NA    NA                              NA
## Pennsylvania               NA     0                              NA
## Rhode Island               NA    NA                              NA
## South Carolina             NA    NA                              NA
## Tennessee                  NA    NA                              NA
## Texas                      NA    NA                              NA
## Utah                       NA    NA                              NA
## Virginia                   NA    NA                              NA
## Washington                 NA 16000                           15000
## West Virginia              NA    NA                              NA
## Wisconsin                  NA    NA                              NA
## Wyoming                    NA    NA                              NA
##                      Two major races  White
## Alabama                           NA  47950
## Arizona                           NA  14000
## Arkansas                          NA     NA
## California                       NaN  77400
## Colorado                          NA 223050
## Connecticut                       NA  25500
## Delaware                          NA     NA
## District of Columbia              NA  17190
## Florida                            0  29291
## Georgia                        19700  60212
## Hawaii                            NA     NA
## Idaho                             NA  23000
## Illinois                          NA  32940
## Indiana                           NA  21250
## Iowa                              NA  28500
## Kansas                            NA  41000
## Kentucky                          NA 240000
## Louisiana                         NA  40575
## Maine                             NA  10700
## Maryland                       22460  46850
## Massachusetts                     NA  24167
## Michigan                       69000  49967
## Minnesota                         NA  14333
## Mississippi                       NA  25000
## Missouri                          NA  14600
## Montana                           NA  36000
## Nebraska                       40000     NA
## Nevada                            NA    NaN
## New Hampshire                     NA  14700
## New Jersey                     24500  11420
## New Mexico                        NA  44000
## New York                         NaN  46487
## North Carolina                    NA  21527
## Ohio                              NA  33161
## Oklahoma                          NA  43867
## Oregon                            NA  12000
## Pennsylvania                      NA  36202
## Rhode Island                      NA  43000
## South Carolina                   NaN  26960
## Tennessee                         NA  61675
## Texas                             NA  57515
## Utah                              NA  72600
## Virginia                          NA  18900
## Washington                        NA  26525
## West Virginia                     NA      0
## Wisconsin                         NA  36673
## Wyoming                           NA     NA
```

----
## The `aggregate()` Function

Aggregate is another way of summarizing data, but the output returned is different.

Note that a formula can be used.


```r
ag <- aggregate(totalPersonalIncome ~ stateFIPScode + raceGeneral + sex, 
        data = census, mean, na.rm = TRUE)
str(ag)
```

```
## 'data.frame':	139 obs. of  4 variables:
##  $ stateFIPScode      : Factor w/ 47 levels "Alabama","Arizona",..: 5 22 1 4 6 9 10 13 20 24 ...
##  $ raceGeneral        : Factor w/ 8 levels "American Indian or Alaska Native",..: 1 1 2 2 2 2 2 2 2 2 ...
##  $ sex                : Factor w/ 2 levels "Female","Male": 1 1 1 1 1 1 1 1 1 1 ...
##  $ totalPersonalIncome: num  26700 20000 7100 40000 3600 ...
```

----
## View output


```r
ag[3:15, ]
```

```
##    stateFIPScode raceGeneral    sex totalPersonalIncome
## 3        Alabama       Black Female                7100
## 4     California       Black Female               40000
## 5    Connecticut       Black Female                3600
## 6        Florida       Black Female               40000
## 7        Georgia       Black Female               19067
## 8       Illinois       Black Female               30000
## 9       Maryland       Black Female                9500
## 10   Mississippi       Black Female                 700
## 11      Missouri       Black Female               54000
## 12    New Jersey       Black Female               18500
## 13      New York       Black Female                9025
## 14          Ohio       Black Female               19604
## 15  Pennsylvania       Black Female               27000
```

----
## Compare to `tapply()`
The below output (and syntax, essentially) will produce exactly the same array
  produced earlier with `by()`, but that of course is different than `aggregate()`.


```r
means2 <- with(census, tapply(totalPersonalIncome, 
                            list(stateFIPScode, raceGeneral, sex),
                          mean, na.rm = TRUE))
str(means2)
```

```
##  num [1:47, 1:8, 1:2] NA NA NA NA 26700 NA NA NA NA NA ...
##  - attr(*, "dimnames")=List of 3
##   ..$ : chr [1:47] "Alabama" "Arizona" "Arkansas" "California" ...
##   ..$ : chr [1:8] "American Indian or Alaska Native" "Black" "Chinese" "Japanese" ...
##   ..$ : chr [1:2] "Female" "Male"
```

----
## Contrasting functions
Why `tapply()` or `by()` or `aggregate()`?
* The `aggregate()` function provides different output from the other two, 
  which may be preferable at times.
* `tapply()` and `by()` are essentially the same, but `by()` can occasionally
  produce summaries when `tapply()` fails

----
## Contrasting functions example
(Note. The example shown is from SabDeM on [SO](http://stackoverflow.com/questions/3505701/r-grouping-functions-sapply-vs-lapply-vs-apply-vs-tapply-vs-by-vs-aggrega) (the response from joran there is also worth reading))


```r
data(iris)
head(iris)
```

```
##   Sepal.Length Sepal.Width Petal.Length Petal.Width Species
## 1          5.1         3.5          1.4         0.2  setosa
## 2          4.9         3.0          1.4         0.2  setosa
## 3          4.7         3.2          1.3         0.2  setosa
## 4          4.6         3.1          1.5         0.2  setosa
## 5          5.0         3.6          1.4         0.2  setosa
## 6          5.4         3.9          1.7         0.4  setosa
```

----
Note that `tapply()` fails in this context


```r
tapply(iris, iris$Species, summary)
```

```
## Error in tapply(iris, iris$Species, summary): arguments must have same length
```
<br>

But `by()` can handle this situation

----

```r
by(iris, iris$Species, summary)
```

```
## iris$Species: setosa
##   Sepal.Length    Sepal.Width     Petal.Length    Petal.Width   
##  Min.   :4.300   Min.   :2.300   Min.   :1.000   Min.   :0.100  
##  1st Qu.:4.800   1st Qu.:3.200   1st Qu.:1.400   1st Qu.:0.200  
##  Median :5.000   Median :3.400   Median :1.500   Median :0.200  
##  Mean   :5.006   Mean   :3.428   Mean   :1.462   Mean   :0.246  
##  3rd Qu.:5.200   3rd Qu.:3.675   3rd Qu.:1.575   3rd Qu.:0.300  
##  Max.   :5.800   Max.   :4.400   Max.   :1.900   Max.   :0.600  
##        Species  
##  setosa    :50  
##  versicolor: 0  
##  virginica : 0  
##                 
##                 
##                 
## -------------------------------------------------------- 
## iris$Species: versicolor
##   Sepal.Length    Sepal.Width     Petal.Length   Petal.Width   
##  Min.   :4.900   Min.   :2.000   Min.   :3.00   Min.   :1.000  
##  1st Qu.:5.600   1st Qu.:2.525   1st Qu.:4.00   1st Qu.:1.200  
##  Median :5.900   Median :2.800   Median :4.35   Median :1.300  
##  Mean   :5.936   Mean   :2.770   Mean   :4.26   Mean   :1.326  
##  3rd Qu.:6.300   3rd Qu.:3.000   3rd Qu.:4.60   3rd Qu.:1.500  
##  Max.   :7.000   Max.   :3.400   Max.   :5.10   Max.   :1.800  
##        Species  
##  setosa    : 0  
##  versicolor:50  
##  virginica : 0  
##                 
##                 
##                 
## -------------------------------------------------------- 
## iris$Species: virginica
##   Sepal.Length    Sepal.Width     Petal.Length    Petal.Width   
##  Min.   :4.900   Min.   :2.200   Min.   :4.500   Min.   :1.400  
##  1st Qu.:6.225   1st Qu.:2.800   1st Qu.:5.100   1st Qu.:1.800  
##  Median :6.500   Median :3.000   Median :5.550   Median :2.000  
##  Mean   :6.588   Mean   :2.974   Mean   :5.552   Mean   :2.026  
##  3rd Qu.:6.900   3rd Qu.:3.175   3rd Qu.:5.875   3rd Qu.:2.300  
##  Max.   :7.900   Max.   :3.800   Max.   :6.900   Max.   :2.500  
##        Species  
##  setosa    : 0  
##  versicolor: 0  
##  virginica :50  
##                 
##                 
## 
```

----
## Finally: `sweep()`
* Used when you want to *sweep* a function across an array.
* Generally used when you want to apply an operation to an array, but the
  values differ for each column.

![sweep](./assets/img/sweep.png)

----
## Example

`sweep()` can be an efficient way to **center** variables, because you need to
   subtract each value within a column by the mean of that column (rather than subtracting a specific value from each column, in which case we'd just us `apply()`)

----
## Centering columns 4-7 in beer data

```r
head(beer)
```

```
##                                  name                 brewer
## 1                     Abbey Monks Ale Abbey Beverage Company
## 2                  Abbey Monks Tripel Abbey Beverage Company
## 3                     Abbey Monks Wit Abbey Beverage Company
## 4 Alameda Barn Owl Imperial Brown Ale    Alameda Brewing Co.
## 5         Alameda Black Bear XX Stout    Alameda Brewing Co.
## 6       Alameda El Torero Organic IPA    Alameda Brewing Co.
##                     style abv ratings score.overall score.by.style
## 1             Belgian Ale 5.2      96            50             49
## 2            Abbey Tripel 8.0       3            NA             NA
## 3 Belgian White (Witbier) 5.1      46            23             19
## 4               Brown Ale 7.9      13            74             81
## 5           Foreign Stout 6.8     172            94             76
## 6    India Pale Ale (IPA) 7.2      56            74             43
```

----

```r
col_M <- colMeans(beer[ ,4:ncol(beer)], na.rm = TRUE)
col_M
```

```
##            abv        ratings  score.overall score.by.style 
##            5.9          113.6           65.9           60.9
```

```r
centered <- sweep(beer[ ,4:ncol(beer)], 2, col_M, "-")
head(centered)
```

```
##    abv ratings score.overall score.by.style
## 1 -0.7     -18         -15.9            -12
## 2  2.1    -111            NA             NA
## 3 -0.8     -68         -42.9            -42
## 4  2.0    -101           8.1             20
## 5  0.9      58          28.1             15
## 6  1.3     -58           8.1            -18
```

----

```r
names(centered) <- paste0(names(centered), "_c")
names(centered)
```

```
## [1] "abv_c"            "ratings_c"        "score.overall_c" 
## [4] "score.by.style_c"
```

```r
# Check that centering worked properly
round(colMeans(centered, na.rm = TRUE), digits = 2)
```

```
##            abv_c        ratings_c  score.overall_c score.by.style_c 
##                0                0                0                0
```

----
## Put it all back together

```r
beer <- cbind(beer, centered)
head(beer)
```

```
##                                  name                 brewer
## 1                     Abbey Monks Ale Abbey Beverage Company
## 2                  Abbey Monks Tripel Abbey Beverage Company
## 3                     Abbey Monks Wit Abbey Beverage Company
## 4 Alameda Barn Owl Imperial Brown Ale    Alameda Brewing Co.
## 5         Alameda Black Bear XX Stout    Alameda Brewing Co.
## 6       Alameda El Torero Organic IPA    Alameda Brewing Co.
##                     style abv ratings score.overall score.by.style abv_c
## 1             Belgian Ale 5.2      96            50             49  -0.7
## 2            Abbey Tripel 8.0       3            NA             NA   2.1
## 3 Belgian White (Witbier) 5.1      46            23             19  -0.8
## 4               Brown Ale 7.9      13            74             81   2.0
## 5           Foreign Stout 6.8     172            94             76   0.9
## 6    India Pale Ale (IPA) 7.2      56            74             43   1.3
##   ratings_c score.overall_c score.by.style_c
## 1       -18           -15.9              -12
## 2      -111              NA               NA
## 3       -68           -42.9              -42
## 4      -101             8.1               20
## 5        58            28.1               15
## 6       -58             8.1              -18
```

----
## Final Guided Practice
MLB salary data


```r
data(MLB)
head(MLB)
```

```
##          player                 team      position salary
## 1  Brandon Webb Arizona Diamondbacks       Pitcher   8500
## 2   Danny Haren Arizona Diamondbacks       Pitcher   8250
## 3  Chris Snyder Arizona Diamondbacks       Catcher   5250
## 4 Edwin Jackson Arizona Diamondbacks       Pitcher   4600
## 5  Adam LaRoche Arizona Diamondbacks First Baseman   4500
## 6   Chad Qualls Arizona Diamondbacks       Pitcher   4185
```

----
## Salary by position and team
First, transform salary to represent salary in millions


```r
MLB$salary <- MLB$salary / 1000
```
Next, compute the average salary by team and position using the following two
  methods:


```r
array <- by(MLB$salary, list(MLB$team, MLB$position), mean)
dtaframe <- aggregate(salary ~ team + position, data = MLB, mean)
```
Use either of the summaries from above to answer the following two questions

1. Which team spends the most, on average, on pitchers?
2. Which team spends the least, on average, on shortstops?

Finally, compute the total salary by position an team, and answer Questions 1 and 2 again (only in sum, instead of on average).

----
## Solutions w/array


```r
array[ ,"Pitcher"]
```

```
##  Arizona Diamondbacks        Atlanta Braves     Baltimore Orioles 
##              2.545231              3.751764              2.540577 
##        Boston Red Sox          Chicago Cubs     Chicago White Sox 
##              4.271456              5.011286              4.663750 
##       Cincinnati Reds     Cleveland Indians      Colorado Rockies 
##              3.993409              2.163253              2.801267 
##        Detroit Tigers       Florida Marlins        Houston Astros 
##              3.474361              2.022709              2.632071 
##    Kansas City Royals   Los Angeles Angeles   Los Angeles Dodgers 
##              3.021670              3.992538              2.717310 
##     Milwaukee Brewers       Minnesota Twins         New York Mets 
##              3.417119              2.492321              4.691864 
##      New York Yankees     Oakland Athletics Philadelphia Phillies 
##              7.240249              1.186465              4.184289 
##    Pittsburgh Pirates      San Diego Padres  San Francisco Giants 
##              1.385821              1.768108              4.039236 
##      Seattle Mariners   St. Louis Cardinals        Tampa Bay Rays 
##              2.434292              3.604305              2.033936 
##         Texas Rangers     Toronto Blue Jays  Washington Nationals 
##              1.635851              1.071218              1.369867
```

```r
array[ ,"Pitcher"][which.max(array[ ,"Pitcher"])]
```

```
## New York Yankees 
##         7.240249
```

```r
array[ ,"Shortstop"][which.min(array[ ,"Shortstop"])]
```

```
## Oakland Athletics 
##             0.405
```

----
## Solutions w/dtaframe


```r
pitchers <- subset(dtaframe, position == "Pitcher")
pitchers[which.max(pitchers$salary), ]
```

```
##                 team position   salary
## 118 New York Yankees  Pitcher 7.240249
```

```r
shortstops <- subset(dtaframe, position == "Shortstop")
shortstops[which.min(shortstops$salary), ]
```

```
##                  team  position salary
## 179 Oakland Athletics Shortstop  0.405
```

----
## Recalculate with summing


```r
arraySum <- by(MLB$salary, list(MLB$team, MLB$position), sum)
dtaframeSum <- aggregate(salary ~ team + position, data = MLB, sum)

arraySum[ ,"Pitcher"][which.max(arraySum[ ,"Pitcher"])]
```

```
## New York Yankees 
##         86.88299
```

```r
arraySum[ ,"Shortstop"][which.min(arraySum[ ,"Shortstop"])]
```

```
## Oakland Athletics 
##             0.405
```

